(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-629c8fca"],{"24fd":function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return l})),a.d(e,"c",(function(){return o}));var n=a("0c6d");function r(t){return Object(n["a"])({url:"org/tree",method:"get",params:t})}function l(t){return Object(n["a"])({url:"org/treeAll",method:"get",params:t})}function o(t){return Object(n["a"])({url:"org/tree/user/search",method:"get",params:t})}},b276:function(t,e,a){"use strict";var n=a("e6ea"),r=a.n(n);r.a},e6ea:function(t,e,a){},fa50:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{padding:"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.toCreate}},[t._v("添加用户")])],1),a("div",{staticStyle:{"padding-left":"20px"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formInline}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{placeholder:""},model:{value:t.formInline.name,callback:function(e){t.$set(t.formInline,"name",e)},expression:"formInline.name"}})],1),a("el-form-item",{attrs:{label:"部门"}},[a("el-cascader",{attrs:{"collapse-tags":"",filterable:"",props:t.tableProps,options:t.orgList,"show-all-levels":!1},model:{value:t.formInline.depIdList,callback:function(e){t.$set(t.formInline,"depIdList",e)},expression:"formInline.depIdList"}})],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{placeholder:""},model:{value:t.formInline.status,callback:function(e){t.$set(t.formInline,"status",e)},expression:"formInline.status"}},[a("el-option",{attrs:{label:"全部",value:0}}),a("el-option",{attrs:{label:"在职",value:1}}),a("el-option",{attrs:{label:"离职",value:2}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")])],1)],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{label:"头像",width:"80"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"30px",height:"30px"},attrs:{src:t.row.avatarUrl}})]}}])}),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),a("el-table-column",{attrs:{prop:"deptName",label:"部门",width:"180"}}),a("el-table-column",{attrs:{prop:"phone",label:"手机号",width:"180"}}),a("el-table-column",{attrs:{prop:"gender",label:"性别",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("genderShow")(e.row.gender))+" ")]}}])}),a("el-table-column",{attrs:{prop:"gender",label:"状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("statusShow")(e.row.leaveDate))+" ")]}}])}),a("el-table-column",{attrs:{prop:"entryDate",label:"入职日期",width:"180"}}),a("el-table-column",{attrs:{prop:"leaveDate",label:"离职日期",width:"180"}}),a("el-table-column",{attrs:{fixed:"right",width:"200",prop:"address",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.toEdit(e.row)}}},[t._v("编辑")]),e.row.leaveDate?t._e():a("el-popconfirm",{staticStyle:{"margin-left":"10px"},attrs:{title:"确定要办理离职吗？"},on:{confirm:function(a){return t.leaveOrg(e.row)}}},[a("el-button",{attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[t._v("离职")])],1)]}}])})],1),a("div",{staticStyle:{"text-align":"center",padding:"20px"}},[a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50],"page-size":t.pageData.count,"current-page":t.pageData.currentPage,total:t.pageData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},r=[],l=(a("b0c0"),a("b85c")),o=a("24fd"),s=a("c24f"),i={name:"index",components:{},data:function(){return{formInline:{name:"",depIdList:"",status:1},tableProps:{value:"id",label:"name",multiple:!0,checkStrictly:!0},tableData:[],pageData:{total:0,count:10,currentPage:1},orgList:[]}},filters:{statusShow:function(t){return void 0==t||null==t?"在职":"离职"}},watch:{},mounted:function(){this.getData(),this.getOrg()},methods:{getOrg:function(){var t=this,e=this;Object(o["b"])({deptId:0,isDept:!0}).then((function(t){e.orgList=t.data})).catch((function(e){t.$message.error(e.response.data)}))},search:function(){this.pageData.currentPage=1,this.getData()},tableRowClassName:function(t){var e=t.row;t.rowIndex;return e.leaveDate?"leave-row":""},toEdit:function(t){this.$router.push("/org/user/edit?id="+t.id)},leaveOrg:function(t){var e=this;Object(s["e"])(t).then((function(t){e.getData()}))},toCreate:function(){this.$router.push("/org/user/create")},handleSizeChange:function(t){this.pageData.count=t,this.pageData.currentPage=1,this.getData()},handleCurrentChange:function(t){this.pageData.currentPage=t,this.getData()},getData:function(){var t,e=this,a=this.formInline.depIdList,n=[],r=Object(l["a"])(a);try{for(r.s();!(t=r.n()).done;){var o=t.value,i=o[o.length-1];n.push(i)}}catch(u){r.e(u)}finally{r.f()}var c=this;Object(s["g"])({page:c.pageData.currentPage,count:c.pageData.count,name:c.formInline.name,depIdList:n,status:c.formInline.status}).then((function(t){c.tableData=t.data.records,c.pageData.total=t.data.total})).catch((function(t){e.$message.error(t.response.data)}))}}},c=i,u=(a("b276"),a("2877")),d=Object(u["a"])(c,n,r,!1,null,"7b3dd4ae",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-629c8fca.3549ff5a.js.map