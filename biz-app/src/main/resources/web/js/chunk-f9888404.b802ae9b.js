(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f9888404"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"24fd":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){return c}));var i=s("0c6d");function n(e){return Object(i["a"])({url:"org/tree",method:"get",params:e})}function a(e){return Object(i["a"])({url:"org/treeAll",method:"get",params:e})}function c(e){return Object(i["a"])({url:"org/tree/user/search",method:"get",params:e})}},"2f74":function(e,t,s){},"69ff":function(e,t,s){},"709c":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("w-dialog",{attrs:{border:!1,closeFree:"",width:"600px",title:e.title},on:{ok:e.selectOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[s("div",{staticClass:"picker"},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"candidate"},["role"!==e.type?s("div",[s("el-input",{staticStyle:{width:"95%"},attrs:{size:"small",clearable:"",placeholder:"ÊêúÁ¥¢‰∫∫ÂëòÔºåÊîØÊåÅÊãºÈü≥„ÄÅÂßìÂêç","prefix-icon":"el-icon-search"},on:{input:e.searchUser},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.showUsers,expression:"!showUsers"}]},[s("ellipsis",{staticStyle:{height:"18px",color:"#8c8c8c",padding:"5px 0 0"},attrs:{hoverTip:"",row:1,content:e.deptStackStr}},[s("i",{staticClass:"el-icon-office-building",attrs:{slot:"pre"},slot:"pre"})]),s("div",{staticStyle:{"margin-top":"5px"}},[s("el-checkbox",{attrs:{disabled:!e.multiple},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("ÂÖ®ÈÄâ")]),s("span",{directives:[{name:"show",rawName:"v-show",value:e.deptStack.length>0,expression:"deptStack.length > 0"}],staticClass:"top-dept",on:{click:e.beforeNode}},[e._v("‰∏ä‰∏ÄÁ∫ß")])],1)],1)],1):s("div",{staticClass:"role-header"},[s("div",[e._v("Á≥ªÁªüËßíËâ≤")])]),s("div",{staticClass:"org-items",style:"role"===e.type?"height: 350px":""},[s("el-empty",{directives:[{name:"show",rawName:"v-show",value:0===e.orgs.length,expression:"orgs.length === 0"}],attrs:{"image-size":100,description:"‰ºº‰πéÊ≤°ÊúâÊï∞ÊçÆ"}}),e._l(e.orgs,(function(t,i){return s("div",{key:i,class:e.orgItemClass(t),on:{click:function(s){return e.selectChange(t)}}},[s("el-checkbox",{attrs:{disabled:e.disableDept(t)},model:{value:t.selected,callback:function(s){e.$set(t,"selected",s)},expression:"org.selected"}}),"dept"===t.type?s("div",[s("i",{staticClass:"el-icon-folder-opened"}),s("span",{staticClass:"name"},[e._v(e._s(t.name))]),s("span",{class:"next-dept"+(t.selected?"-disable":""),on:{click:function(s){return s.stopPropagation(),e.nextNode(t)}}},[s("i",{staticClass:"iconfont icon-map-site"}),e._v("‰∏ãÁ∫ß ")])]):"user"===t.type?s("div",{staticStyle:{display:"flex","align-items":"center"}},[e.$isNotEmpty(t.avatar)?s("el-avatar",{attrs:{size:35,src:t.avatar}}):s("span",{staticClass:"avatar"},[e._v(e._s(e.getShortName(t.name)))]),s("span",{staticClass:"name"},[e._v(e._s(t.name))])],1):s("div",{staticStyle:{display:"inline-block"}},[s("i",{staticClass:"iconfont icon-bumen"}),s("span",{staticClass:"name"},[e._v(e._s(t.name))])])],1)}))],2)]),s("div",{staticClass:"selected"},[s("div",{staticClass:"count"},[s("span",[e._v("Â∑≤ÈÄâ "+e._s(e.select.length)+" È°π")]),s("span",{on:{click:e.clearSelected}},[e._v("Ê∏ÖÁ©∫")])]),s("div",{staticClass:"org-items",staticStyle:{height:"350px"}},[s("el-empty",{directives:[{name:"show",rawName:"v-show",value:0===e.select.length,expression:"select.length === 0"}],attrs:{"image-size":100,description:"ËØ∑ÁÇπÂáªÂ∑¶‰æßÂàóË°®ÈÄâÊã©Êï∞ÊçÆ"}}),e._l(e.select,(function(t,i){return s("div",{key:i,class:e.orgItemClass(t)},["dept"===t.type?s("div",[s("i",{staticClass:"el-icon-folder-opened"}),s("span",{staticClass:"name",staticStyle:{position:"static"}},[e._v(e._s(t.name))])]):"user"===t.type?s("div",{staticStyle:{display:"flex","align-items":"center"}},[e.$isNotEmpty(t.avatar)?s("el-avatar",{attrs:{size:35,src:t.avatar}}):s("span",{staticClass:"avatar"},[e._v(e._s(e.getShortName(t.name)))]),s("span",{staticClass:"name"},[e._v(e._s(t.name))])],1):s("div",[s("i",{staticClass:"iconfont icon-bumen"}),s("span",{staticClass:"name"},[e._v(e._s(t.name))])]),s("i",{staticClass:"el-icon-close",on:{click:function(t){return e.noSelected(i)}}})])}))],2)])])])},n=[],a=(s("4160"),s("d81d"),s("a434"),s("b0c0"),s("ac1f"),s("841c"),s("498a"),s("159b"),s("24fd")),c={name:"OrgPicker",components:{},props:{title:{default:"ËØ∑ÈÄâÊã©",type:String},type:{default:"org",type:String},multiple:{default:!1,type:Boolean},selected:{default:function(){return[]},type:Array}},mounted:function(){},data:function(){return{visible:!1,loading:!1,checkAll:!1,nowDeptId:null,isIndeterminate:!1,searchUsers:[],nodes:[],select:[],search:"",deptStack:[]}},computed:{deptStackStr:function(){return String(this.deptStack.map((function(e){return e.name}))).replaceAll(","," > ")},orgs:function(){return this.search&&""!==this.search.trim()?this.searchUsers:this.nodes},showUsers:function(){return this.search||""!==this.search.trim()}},methods:{show:function(){this.visible=!0,this.init(),this.getOrgList()},orgItemClass:function(e){return{"org-item":!0,"org-dept-item":"dept"===e.type,"org-user-item":"user"===e.type,"org-role-item":"role"===e.type}},disableDept:function(e){return"user"===this.type&&"dept"===e.type},getOrgList:function(){var e=this;this.loading=!0,Object(a["a"])({deptId:this.nowDeptId,type:this.type}).then((function(t){e.loading=!1,e.nodes=t.data,e.selectToLeft()})).catch((function(t){e.loading=!1,e.$message.error(t.response.data)}))},getShortName:function(e){return e?e.length>2?e.substring(1,3):e:"**"},searchUser:function(){var e=this,t=this.search.trim();this.searchUsers=[],this.loading=!0,Object(a["c"])({userName:t}).then((function(t){e.loading=!1,e.searchUsers=t.data,e.selectToLeft()})).catch((function(t){e.loading=!1,e.$message.error("Êé•Âè£ÂºÇÂ∏∏")}))},selectToLeft:function(){var e=this,t=""===this.search.trim()?this.nodes:this.searchUsers;t.forEach((function(t){for(var s=0;s<e.select.length;s++){if(e.select[s].id===t.id&&e.select[s].type===t.type){t.selected=!0;break}t.selected=!1}}))},selectChange:function(e){if(e.selected){this.checkAll=!1;for(var t=0;t<this.select.length;t++)if(this.select[t].id===e.id){this.select.splice(t,1);break}e.selected=!1}else if(!this.disableDept(e)){e.selected=!0;var s=""===this.search.trim()?this.nodes:this.searchUsers;this.multiple||s.forEach((function(t){e.id!==t.id&&(t.selected=!1)})),"dept"===e.type?this.multiple?this.select.unshift(e):this.select=[e]:this.multiple?this.select.push(e):this.select=[e]}},noSelected:function(e){for(var t=this.nodes,s=0;s<2;s++){for(var i=0;i<t.length;i++)if(t[i].id===this.select[e].id){t[i].selected=!1,this.checkAll=!1;break}t=this.searchUsers}this.select.splice(e,1)},handleCheckAllChange:function(){var e=this;this.nodes.forEach((function(t){if(e.checkAll)t.selected||e.disableDept(t)||(t.selected=!0,e.select.push(t));else{t.selected=!1;for(var s=0;s<e.select.length;s++)if(e.select[s].id===t.id){e.select.splice(s,1);break}}}))},nextNode:function(e){this.nowDeptId=e.id,this.deptStack.push(e),this.getOrgList()},beforeNode:function(){0!==this.deptStack.length&&(this.deptStack.length<2?this.nowDeptId=null:this.nowDeptId=this.deptStack[this.deptStack.length-2].id,this.deptStack.splice(this.deptStack.length-1,1),this.getOrgList())},recover:function(){this.select=[],this.nodes.forEach((function(e){return e.selected=!1}))},selectOk:function(){this.$emit("ok",Object.assign([],this.select.map((function(e){return e})))),this.visible=!1,this.recover()},clearSelected:function(){var e=this;this.$confirm("ÊÇ®Á°ÆÂÆöË¶ÅÊ∏ÖÁ©∫Â∑≤ÈÄâ‰∏≠ÁöÑÈ°π?","ÊèêÁ§∫",{confirmButtonText:"Á°ÆÂÆö",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then((function(){e.recover()}))},close:function(){this.$emit("close"),this.recover()},init:function(){this.checkAll=!1,this.nowDeptId=null,this.deptStack=[],this.nodes=[],this.select=Object.assign([],this.selected),this.selectToLeft()}}},r=c,l=(s("75ab"),s("2877")),o=Object(l["a"])(r,i,n,!1,null,"1cfdb70e",null);t["a"]=o.exports},"75ab":function(e,t,s){"use strict";var i=s("69ff"),n=s.n(i);n.a},"841c":function(e,t,s){"use strict";var i=s("d784"),n=s("825a"),a=s("1d80"),c=s("129f"),r=s("14c3");i("search",1,(function(e,t,s){return[function(t){var s=a(this),i=void 0==t?void 0:t[e];return void 0!==i?i.call(t,s):new RegExp(t)[e](String(s))},function(e){var i=s(t,e,this);if(i.done)return i.value;var a=n(e),l=String(this),o=a.lastIndex;c(o,0)||(a.lastIndex=0);var d=r(a,l);return c(a.lastIndex,o)||(a.lastIndex=o),null===d?-1:d.index}]}))},c862:function(e,t,s){"use strict";var i=s("2f74"),n=s.n(i);n.a},d504:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{"text-align":"center"}},[s("h4",[e._v("ÂÖàÈÄâÊã©Êú¨Ê¨°ÁôªÂΩï‰∫∫ÂëòÁöÑË∫´‰ªΩÔºåÂÜçËøõÂÖ•Áõ∏Â∫îÁöÑÁ≥ªÁªü üòÖ")]),s("div",{staticClass:"work-panel"},[s("div",{staticClass:"user"},[s("el-button",{attrs:{type:"primary",round:"",size:"small",icon:"el-icon-user"},on:{click:function(t){return e.$refs.orgPicker.show()}}},[e._v("ÈÄâÊã©Êú¨Ê¨°ÁôªÂΩïËÄÖ")]),""!==e.loginUser&&null!==e.loginUser?s("div",[s("span",[e._v(e._s(e.loginUser.name))])]):e._e()],1),s("div",{staticClass:"panel"},[s("div",{staticClass:"panel-item",on:{click:function(t){return e.to("/workSpace")}}},[e._m(0),s("p",[e._v(" ÊÇ®ÂèØ‰ª•ÂèëËµ∑„ÄÅÂ§ÑÁêÜÂèäÊü•ÁúãÂÆ°ÊâπÔºåËøõË°åÊó•Â∏∏Â∑•‰Ωú‰ªªÂä° ")])]),s("div",{staticClass:"panel-item",on:{click:function(t){return e.to("/formsPanel")}}},[e._m(1),s("p",[e._v(" ÂÆ°ÊâπÂ∑•‰ΩúÊµÅÂàõÂª∫ „ÄÅÁºñËæëÂèäÂÖ∂‰ªñËÆæÁΩÆÊìç‰ΩúÔºåÂùáÂèØ‰ª•Âú®ÂêéÂè∞ËøõË°å ")])])])]),s("org-picker",{ref:"orgPicker",attrs:{type:"user",selected:e.select},on:{ok:e.selected}})],1)},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("i",{staticClass:"el-icon-s-platform"}),s("span",[e._v("ËøõÂÖ•Â∑•‰ΩúÂå∫")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("i",{staticClass:"el-icon-s-custom"}),s("span",[e._v("ËøõÂÖ•ÁÆ°ÁêÜÂêéÂè∞")])])}],a=s("709c"),c={name:"Index",components:{OrgPicker:a["a"]},data:function(){return{select:[],loginUser:""}},mounted:function(){var e=sessionStorage.getItem("user");null!==e&&""!==e&&(this.loginUser=JSON.parse(e),this.select.push(this.loginUser))},methods:{selected:function(e){this.select=e,this.loginUser=e.length>0?e[0]:"",this.showUserSelect=!1,sessionStorage.setItem("user",JSON.stringify(this.loginUser))},to:function(e){null===this.loginUser||""===this.loginUser?this.$message.warning("ËØ∑ÂÖàÈÄâÊã©‰∏Ä‰∏™‰∫∫ÂëòË∫´‰ªΩËøõË°åÁôªÂΩï"):this.$router.push(e)}}},r=c,l=(s("c862"),s("2877")),o=Object(l["a"])(r,i,n,!1,null,"281c168a",null);t["default"]=o.exports},d81d:function(e,t,s){"use strict";var i=s("23e7"),n=s("b727").map,a=s("1dde"),c=s("ae40"),r=a("map"),l=c("map");i({target:"Array",proto:!0,forced:!r||!l},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-f9888404.b802ae9b.js.map