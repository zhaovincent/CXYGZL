{"version":3,"sources":["webpack:///./src/views/common/form/components/TableList.vue?aae2","webpack:///src/views/common/form/components/TableList.vue","webpack:///./src/views/common/form/components/TableList.vue?ff20","webpack:///./src/views/common/form/components/TableList.vue","webpack:///./src/views/common/form/ComponentMinxins.js","webpack:///./src/views/common/form/components/TableList.vue?26f3"],"names":["render","_vm","this","_h","$createElement","_c","_self","mode","staticClass","attrs","_columns","animation","chosenClass","sort","on","$event","drag","selectFormItem","_l","cp","id","key","style","getSelectedClass","stopPropagation","selectItem","props","_v","_e","_s","title","delItem","staticStyle","background","padding","showBorder","_value","column","index","getMinWidth","scopedSlots","_u","fn","scope","class","showError","$index","model","value","callback","$$v","$set","expression","copyData","row","delRow","addRow","placeholder","i","ref","refInFor","rules","perm","tempkey","staticRenderFns","component","type","String","default","required","Boolean","data","computed","get","set","val","$emit"],"mappings":"kJAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAe,WAAbJ,EAAIM,KAAmBF,EAAG,MAAM,CAACA,EAAG,YAAY,CAACG,YAAY,cAAcC,MAAM,CAAC,KAAOR,EAAIS,SAAS,MAAQ,OAAO,QAAU,CAACC,UAAW,IAAKC,YAAY,SAAUC,MAAK,IAAOC,GAAG,CAAC,MAAQ,SAASC,GAAQd,EAAIe,MAAO,EAAMf,EAAIgB,eAAiB,MAAM,IAAM,SAASF,GAAQd,EAAIe,MAAO,KAASf,EAAIiB,GAAIjB,EAAY,UAAE,SAASkB,EAAGC,GAAI,OAAOf,EAAG,MAAM,CAACgB,IAAID,EAAGZ,YAAY,cAAcc,MAAOrB,EAAIsB,iBAAiBJ,GAAKL,GAAG,CAAC,MAAQ,SAASC,GAAiC,OAAzBA,EAAOS,kBAAyBvB,EAAIwB,WAAWN,MAAO,CAACd,EAAG,MAAM,CAACG,YAAY,iBAAiB,CAACH,EAAG,IAAI,CAAEc,EAAGO,MAAc,SAAErB,EAAG,OAAO,CAACJ,EAAI0B,GAAG,OAAO1B,EAAI2B,KAAK3B,EAAI0B,GAAG1B,EAAI4B,GAAGV,EAAGW,UAAUzB,EAAG,MAAM,CAACG,YAAY,YAAY,CAACH,EAAG,IAAI,CAACG,YAAY,gBAAgBM,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOd,EAAI8B,QAAQX,SAAUf,EAAG,qBAAqB,CAACI,MAAM,CAAC,OAASU,MAAO,QAAO,GAAGd,EAAG,MAAM,CAAC2B,YAAY,CAAC,MAAQ,UAAU,aAAa,SAAS,MAAQ,MAAM,QAAU,QAAQ,CAAC/B,EAAI0B,GAAG,kBAAkB,GAAGtB,EAAG,MAAM,CAAEJ,EAAa,UAAEI,EAAG,MAAM,CAACA,EAAG,WAAW,CAAC2B,YAAY,CAAC,MAAQ,QAAQvB,MAAM,CAAC,KAAO,SAAS,oBAAoB,CAACwB,WAAW,UAAWC,QAAQ,SAAS,OAASjC,EAAIkC,WAAW,KAAOlC,EAAImC,SAAS,CAAC/B,EAAG,kBAAkB,CAACI,MAAM,CAAC,MAAQ,GAAG,KAAO,QAAQ,MAAQ,KAAK,MAAQ,QAAQR,EAAIiB,GAAIjB,EAAY,UAAE,SAASoC,EAAOC,GAAO,OAAOjC,EAAG,kBAAkB,CAACI,MAAM,CAAC,YAAYR,EAAIsC,YAAYF,GAAQ,KAAOA,EAAOjB,GAAG,MAAQiB,EAAOP,OAAOU,YAAYvC,EAAIwC,GAAG,CAAC,CAACpB,IAAI,UAAUqB,GAAG,SAASC,GAAO,MAAO,CAACtC,EAAG,qBAAqB,CAACuC,MAAM,CAAC,cAAe3C,EAAI4C,UAAUR,EAAQpC,EAAImC,OAAOO,EAAMG,QAAQT,EAAOjB,MAAMX,MAAM,CAAC,KAAOR,EAAIM,KAAK,OAAS8B,GAAQU,MAAM,CAACC,MAAO/C,EAAImC,OAAOO,EAAMG,QAAQT,EAAOjB,IAAK6B,SAAS,SAAUC,GAAMjD,EAAIkD,KAAKlD,EAAImC,OAAOO,EAAMG,QAAST,EAAOjB,GAAI8B,IAAME,WAAW,yCAAyC,MAAK,QAAU/C,EAAG,kBAAkB,CAACI,MAAM,CAAC,MAAQ,QAAQ,YAAY,KAAK,MAAQ,MAAM+B,YAAYvC,EAAIwC,GAAG,CAAC,CAACpB,IAAI,UAAUqB,GAAG,SAASC,GAAO,MAAO,CAACtC,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,OAAO,KAAO,QAAQK,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOd,EAAIoD,SAASV,EAAMG,OAAQH,EAAMW,QAAQ,CAACrD,EAAI0B,GAAG,SAAStB,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,OAAO,KAAO,QAAQK,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOd,EAAIsD,OAAOZ,EAAMG,OAAQH,EAAMW,QAAQ,CAACrD,EAAI0B,GAAG,YAAY,MAAK,EAAM,eAAe,GAAGtB,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,QAAQ,KAAO,gBAAgBK,GAAG,CAAC,MAAQb,EAAIuD,SAAS,CAACvD,EAAI0B,GAAG1B,EAAI4B,GAAG5B,EAAIwD,iBAAiB,GAAGpD,EAAG,MAAM,CAACJ,EAAIiB,GAAIjB,EAAU,QAAE,SAASqD,EAAII,GAAG,OAAOrD,EAAG,UAAU,CAACgB,IAAIqC,EAAEC,IAAK,cAAgBD,EAAGE,UAAS,EAAKpD,YAAY,eAAeC,MAAM,CAAC,MAAQR,EAAI4D,MAAM,MAAQP,IAAM,CAACjD,EAAG,MAAM,CAACG,YAAY,uBAAuB,CAACH,EAAG,OAAO,CAACJ,EAAI0B,GAAG,KAAK1B,EAAI4B,GAAG6B,EAAI,GAAG,QAAmB,KAAVzD,EAAI6D,KAAWzD,EAAG,IAAI,CAACG,YAAY,gBAAgBM,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOd,EAAIsD,OAAOG,EAAGJ,OAASrD,EAAI2B,OAAO3B,EAAIiB,GAAIjB,EAAY,UAAE,SAASoC,EAAOC,GAAO,OAAOjC,EAAG,eAAe,CAACgB,IAAI,UAAYiB,EAAM7B,MAAM,CAAC,KAAO4B,EAAOjB,GAAG,MAAQiB,EAAOP,QAAQ,CAACzB,EAAG,qBAAqB,CAACgB,IAAIpB,EAAI8D,QAAQtD,MAAM,CAAC,KAAOR,EAAIM,KAAK,OAAS8B,GAAQU,MAAM,CAACC,MAAOM,EAAIjB,EAAOjB,IAAK6B,SAAS,SAAUC,GAAMjD,EAAIkD,KAAKG,EAAKjB,EAAOjB,GAAI8B,IAAME,WAAW,qBAAqB,OAAM,MAAgB,KAAVnD,EAAI6D,KAAWzD,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,QAAQ,KAAO,gBAAgBK,GAAG,CAAC,MAAQb,EAAIuD,SAAS,CAACvD,EAAI0B,GAAG1B,EAAI4B,GAAG5B,EAAIwD,aAAa,OAAOxD,EAAI2B,MAAM,QAC5yGoC,EAAkB,G,yHCmEtB,GACE,OAAF,SACE,KAAF,YACE,WAAF,CAAI,UAAJ,IAAI,iBAAJ,QACE,MAAF,CACI,MAAJ,CACM,KAAN,MACM,QAAN,WACQ,MAAR,KAGI,YAAJ,CACM,KAAN,OACM,QAAN,QAEI,QAAJ,CACM,KAAN,MACM,QAAN,WACQ,MAAR,KAGI,WAAJ,CACM,KAAN,QACM,SAAN,GAEI,QAAJ,CACM,KAAN,OACM,QAAN,GAEI,UAAJ,CACM,KAAN,QACM,SAAN,GAEI,KAAJ,CACM,KAAN,OACM,QAAN,MAGE,QAtCF,WAsCI,IAAJ,mBAGA,cAHI,IAGE,IAAN,wBAAQ,IAAR,UACQ,EAAR,sBAJA,8BAMI,KAAJ,8BAGE,MAAF,CACI,KAAJ,YACM,QAAN,gBAGE,QApDF,WAqDA,4BACM,KAAN,YAGE,SAAF,CACI,MADJ,WAEM,IAAN,KAUM,OATA,KAAN,6BACA,mBACU,EAAV,QACY,KAAZ,qCACY,UAAZ,EACY,QAAZ,sBAAY,QAAZ,aAIA,GAEI,SAAJ,CACM,IADN,WAEQ,OAAR,cAEM,IAJN,SAIA,GACQ,KAAR,YAGI,eAAJ,CACM,IADN,WAEQ,OAAR,kCAEM,IAJN,SAIA,GACQ,KAAR,iCAIE,KAxFF,WAyFI,MAAJ,CACM,SAAN,oBACM,OAAN,KACM,MAAN,EACM,UAAN,SAGE,QAAF,CACI,YADJ,SACA,GACM,OAAN,QACQ,IAAR,WACU,MAAV,QACQ,IAAR,gBACU,MAAV,QACQ,IAAR,iBACU,MAAV,QACQ,QACE,MAAV,UAGI,UAbJ,SAaA,KACM,GAAN,iBACQ,OAAR,aACU,KAAV,YACU,KAAV,YACU,KAAV,iBACU,KAAV,aACY,QAAZ,8BACU,QACE,OAAZ,oBAGM,OAAN,GAEI,SA3BJ,SA2BA,KACM,KAAN,gCAEI,OA9BJ,SA8BA,KACM,KAAN,oBAEI,OAjCJ,WAiCM,IAAN,OACM,GAAN,iDACQ,KAAR,wDACA,CACQ,IAAR,KACQ,KAAR,6BAAU,OAAV,yBACQ,KAAR,eACQ,KAAR,kCAGI,QA3CJ,SA2CA,GACM,KAAN,sBAEI,WA9CJ,SA8CA,GACM,KAAN,kBAEI,iBAjDJ,SAiDA,GACM,OAAN,wFAEI,SApDJ,SAoDA,GAAM,IAAN,OACM,GAAN,gBAEQ,IADA,IAAR,KACA,8BACU,GAAV,+BACY,IAAZ,iCAEc,GADA,GAAd,oEACA,EAEgB,YADA,GAAhB,GAMQ,EAAR,OACA,CACQ,IAAR,IACQ,KAAR,8BACU,IAAV,mCACA,iCACY,EAAZ,yBACA,GACgB,UAKhB,uBACU,GAAV,GAEU,GAAV,OCtPgY,I,wBCQ5XC,EAAY,eACd,EACAjE,EACAgE,GACA,EACA,KACA,WACA,MAIa,aAAAC,E,6CClBD,QACZvC,MAAM,CACJnB,KAAK,CACH2D,KAAMC,OACNC,QAAS,UAEXC,SAAS,CACPH,KAAMI,QACNF,SAAS,IAGbG,KAXY,WAYV,MAAO,IAETC,SAAU,CACRpC,OAAQ,CACNqC,IADM,WAEJ,OAAOvE,KAAK8C,OAEd0B,IAJM,SAIFC,GACFzE,KAAK0E,MAAM,QAASD,Q,kCCrB5B,yBAA4rB,EAAG","file":"js/chunk-22719bd4.cf1aba12.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.mode === 'DESIGN')?_c('div',[_c('draggable',{staticClass:\"l-drag-from\",attrs:{\"list\":_vm._columns,\"group\":\"form\",\"options\":{animation: 300, chosenClass:'choose', sort:true}},on:{\"start\":function($event){_vm.drag = true; _vm.selectFormItem = null},\"end\":function($event){_vm.drag = false}}},_vm._l((_vm._columns),function(cp,id){return _c('div',{key:id,staticClass:\"l-form-item\",style:(_vm.getSelectedClass(cp)),on:{\"click\":function($event){$event.stopPropagation();return _vm.selectItem(cp)}}},[_c('div',{staticClass:\"l-form-header\"},[_c('p',[(cp.props.required)?_c('span',[_vm._v(\"*\")]):_vm._e(),_vm._v(_vm._s(cp.title))]),_c('div',{staticClass:\"l-option\"},[_c('i',{staticClass:\"el-icon-close\",on:{\"click\":function($event){return _vm.delItem(id)}}})]),_c('form-design-render',{attrs:{\"config\":cp}})],1)])}),0),_c('div',{staticStyle:{\"color\":\"#c0bebe\",\"text-align\":\"center\",\"width\":\"90%\",\"padding\":\"5px\"}},[_vm._v(\"☝ 拖拽控件到表格内部\")])],1):_c('div',[(_vm.rowLayout)?_c('div',[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"size\":\"medium\",\"header-cell-style\":{background:'#f5f7fa', padding:'3px 0'},\"border\":_vm.showBorder,\"data\":_vm._value}},[_c('el-table-column',{attrs:{\"fixed\":\"\",\"type\":\"index\",\"label\":\"序号\",\"width\":\"50\"}}),_vm._l((_vm._columns),function(column,index){return _c('el-table-column',{attrs:{\"min-width\":_vm.getMinWidth(column),\"prop\":column.id,\"label\":column.title},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('form-design-render',{class:{'valid-error': _vm.showError(column, _vm._value[scope.$index][column.id])},attrs:{\"mode\":_vm.mode,\"config\":column},model:{value:(_vm._value[scope.$index][column.id]),callback:function ($$v) {_vm.$set(_vm._value[scope.$index], column.id, $$v)},expression:\"_value[scope.$index][column.id]\"}})]}}],null,true)})}),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"min-width\":\"90\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\"},on:{\"click\":function($event){return _vm.copyData(scope.$index, scope.row)}}},[_vm._v(\"复制 \")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\"},on:{\"click\":function($event){return _vm.delRow(scope.$index, scope.row)}}},[_vm._v(\"删除\")])]}}],null,false,3431180089)})],2),_c('el-button',{attrs:{\"size\":\"small\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.addRow}},[_vm._v(_vm._s(_vm.placeholder))])],1):_c('div',[_vm._l((_vm._value),function(row,i){return _c('el-form',{key:i,ref:(\"table-form-\" + i),refInFor:true,staticClass:\"table-column\",attrs:{\"rules\":_vm.rules,\"model\":row}},[_c('div',{staticClass:\"table-column-action\"},[_c('span',[_vm._v(\"第 \"+_vm._s(i + 1)+\" 项\")]),(_vm.perm!='R')?_c('i',{staticClass:\"el-icon-close\",on:{\"click\":function($event){return _vm.delRow(i, row)}}}):_vm._e()]),_vm._l((_vm._columns),function(column,index){return _c('el-form-item',{key:'column_' + index,attrs:{\"prop\":column.id,\"label\":column.title}},[_c('form-design-render',{key:_vm.tempkey,attrs:{\"mode\":_vm.mode,\"config\":column},model:{value:(row[column.id]),callback:function ($$v) {_vm.$set(row, column.id, $$v)},expression:\"row[column.id]\"}})],1)})],2)}),(_vm.perm=='E')?_c('el-button',{attrs:{\"size\":\"small\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.addRow}},[_vm._v(_vm._s(_vm.placeholder)+\" \")]):_vm._e()],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <div v-if=\"mode === 'DESIGN'\">\r\n            <draggable class=\"l-drag-from\" :list=\"_columns\" group=\"form\"\r\n                       :options=\"{animation: 300, chosenClass:'choose', sort:true}\"\r\n                       @start=\"drag = true; selectFormItem = null\" @end=\"drag = false\">\r\n                <div v-for=\"(cp, id) in _columns\" :key=\"id\" class=\"l-form-item\" @click.stop=\"selectItem(cp)\"\r\n                     :style=\"getSelectedClass(cp)\">\r\n                    <div class=\"l-form-header\">\r\n                        <p><span v-if=\"cp.props.required\">*</span>{{ cp.title }}</p>\r\n                        <div class=\"l-option\">\r\n                            <i class=\"el-icon-close\" @click=\"delItem(id)\"></i>\r\n                        </div>\r\n                        <form-design-render :config=\"cp\"/>\r\n                    </div>\r\n                </div>\r\n            </draggable>\r\n            <div style=\"color: #c0bebe;text-align: center; width: 90%; padding: 5px;\">☝ 拖拽控件到表格内部</div>\r\n        </div>\r\n        <div v-else>\r\n            <div v-if=\"rowLayout\">\r\n                <el-table size=\"medium\" :header-cell-style=\"{background:'#f5f7fa', padding:'3px 0'}\"\r\n                          :border=\"showBorder\" :data=\"_value\" style=\"width: 100%\">\r\n                    <el-table-column fixed type=\"index\" label=\"序号\" width=\"50\"></el-table-column>\r\n                    <el-table-column :min-width=\"getMinWidth(column)\" v-for=\"(column, index) in _columns\"\r\n                                     :prop=\"column.id\" :label=\"column.title\">\r\n                        <template slot-scope=\"scope\">\r\n                            <form-design-render\r\n                                    :class=\"{'valid-error': showError(column, _value[scope.$index][column.id])}\"\r\n                                    v-model=\"_value[scope.$index][column.id]\" :mode=\"mode\" :config=\"column\"/>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column fixed=\"right\" min-width=\"90\" label=\"操作\">\r\n                        <template slot-scope=\"scope\">\r\n                            <el-button size=\"mini\" type=\"text\" @click=\"copyData(scope.$index, scope.row)\">复制\r\n                            </el-button>\r\n                            <el-button size=\"mini\" type=\"text\" @click=\"delRow(scope.$index, scope.row)\">删除</el-button>\r\n                        </template>\r\n                    </el-table-column>\r\n                </el-table>\r\n                <el-button size=\"small\" icon=\"el-icon-plus\" @click=\"addRow\">{{ placeholder }}</el-button>\r\n            </div>\r\n            <div v-else>\r\n                <el-form :rules=\"rules\" :model=\"row\" :ref=\"`table-form-${i}`\" class=\"table-column\"\r\n                         v-for=\"(row, i) in _value\" :key=\"i\">\r\n                    <div class=\"table-column-action\">\r\n                        <span>第 {{ i + 1 }} 项</span>\r\n                        <i class=\"el-icon-close\" v-if=\"perm!='R'\" @click=\"delRow(i, row)\"></i>\r\n                    </div>\r\n                    <el-form-item v-for=\"(column, index) in _columns\" :key=\"'column_' + index\" :prop=\"column.id\"\r\n                                  :label=\"column.title\">\r\n                        <form-design-render :key=\"tempkey\" v-model=\"row[column.id]\" :mode=\"mode\" :config=\"column\"/>\r\n                    </el-form-item>\r\n                </el-form>\r\n                <el-button size=\"small\" v-if=\"perm=='E'\" icon=\"el-icon-plus\" @click=\"addRow\">{{ placeholder }}\r\n                </el-button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport draggable from \"vuedraggable\";\r\nimport {ValueType} from \"../ComponentsConfigExport\";\r\nimport FormDesignRender from '@/views/admin/layout/form/FormDesignRender'\r\nimport componentMinxins from '../ComponentMinxins'\r\n\r\nexport default {\r\n    mixins: [componentMinxins],\r\n    name: \"TableList\",\r\n    components: {draggable, FormDesignRender},\r\n    props: {\r\n        value: {\r\n            type: Array,\r\n            default: () => {\r\n                return []\r\n            }\r\n        },\r\n        placeholder: {\r\n            type: String,\r\n            default: '添加数据'\r\n        },\r\n        columns: {\r\n            type: Array,\r\n            default: () => {\r\n                return []\r\n            }\r\n        },\r\n        showBorder: {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        maxSize: {\r\n            type: Number,\r\n            default: 0\r\n        },\r\n        rowLayout: {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        perm: {\r\n            type: String,\r\n            default: 'E'\r\n        }\r\n    },\r\n    mounted() {\r\n\r\n\r\n        for (var item of this.columns) {\r\n            item.props.perm = this.perm\r\n        }\r\n        this.tempkey=new Date().getTime()\r\n\r\n    },\r\n    watch:{\r\n      perm:function (v){\r\n          console.log('perm',v)\r\n      }\r\n    },\r\n    created() {\r\n        if (!Array.isArray(this.value)) {\r\n            this._value = []\r\n        }\r\n    },\r\n    computed: {\r\n        rules() {\r\n            const rules = {}\r\n            this.columns.forEach(col => {\r\n                if (col.props.required) {\r\n                    rules[col.id] = [{\r\n                        type: col.valueType === 'Array' ? 'array' : undefined,\r\n                        required: true,\r\n                        message: `请填写${col.title}`, trigger: 'blur'\r\n                    }]\r\n                }\r\n            })\r\n            return rules\r\n        },\r\n        _columns: {\r\n            get() {\r\n                return this.columns;\r\n            },\r\n            set(val) {\r\n                this.columns = val;\r\n            }\r\n        },\r\n        selectFormItem: {\r\n            get() {\r\n                return this.$store.state.selectFormItem\r\n            },\r\n            set(val) {\r\n                this.$store.state.selectFormItem = val\r\n            },\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            tempkey:new Date().getTime(),\r\n            select: null,\r\n            drag: false,\r\n            ValueType\r\n        }\r\n    },\r\n    methods: {\r\n        getMinWidth(col) {\r\n            switch (col.name) {\r\n                case 'DateTime':\r\n                    return '250px'\r\n                case 'DateTimeRange':\r\n                    return '280px'\r\n                case 'MultipleSelect':\r\n                    return '200px'\r\n                default:\r\n                    return '150px'\r\n            }\r\n        },\r\n        showError(col, val) {\r\n            if (col.props.required) {\r\n                switch (col.valueType) {\r\n                    case ValueType.dept:\r\n                    case ValueType.user:\r\n                    case ValueType.dateRange:\r\n                    case ValueType.array:\r\n                        return !(Array.isArray(val) && val.length > 0)\r\n                    default:\r\n                        return !this.$isNotEmpty(val)\r\n                }\r\n            }\r\n            return false\r\n        },\r\n        copyData(i, row) {\r\n            this._value.push(this.$deepCopy(row))\r\n        },\r\n        delRow(i, row) {\r\n            this._value.splice(i, 1)\r\n        },\r\n        addRow() {\r\n            if (this.maxSize > 0 && this._value.length >= this.maxSize) {\r\n                this.$message.warning(`最多只能添加${this.maxSize}行`)\r\n            } else {\r\n                let row = {}\r\n                this.columns.forEach(col => this.$set(row, col.id, undefined))\r\n                this._value.push(row)\r\n                this.$set(this, '_value', this._value)\r\n            }\r\n        },\r\n        delItem(id) {\r\n            this._columns.splice(id, 1)\r\n        },\r\n        selectItem(cp) {\r\n            this.selectFormItem = cp\r\n        },\r\n        getSelectedClass(cp) {\r\n            return this.selectFormItem && this.selectFormItem.id === cp.id ? 'border-left: 4px solid #f56c6c' : ''\r\n        },\r\n        validate(call) {\r\n            if (this.rowLayout) {\r\n                let result = true\r\n                for (let i = 0; i < this.columns.length; i++) {\r\n                    if (this.columns[i].props.required) {\r\n                        for (let j = 0; j < this._value.length; j++) {\r\n                            result = !this.showError(this.columns[i], this._value[j][this.columns[i].id])\r\n                            if (!result) {\r\n                                call(false)\r\n                                return\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                call(result)\r\n            } else {\r\n                let success = 0\r\n                this._value.forEach((v, i) => {\r\n                    let formRef = this.$refs[`table-form-${i}`]\r\n                    if (formRef && Array.isArray(formRef) && formRef.length > 0) {\r\n                        formRef[0].validate(valid => {\r\n                            if (valid) {\r\n                                success++;\r\n                            }\r\n                        })\r\n                    }\r\n                })\r\n                if (success === this._value.length) {\r\n                    call(true)\r\n                } else {\r\n                    call(false)\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n/deep/ .valid-error {\r\n  .el-input__inner {\r\n    border-color: #F56C6C;\r\n  }\r\n}\r\n\r\n.choose {\r\n  border: 1px dashed @theme-primary !important;\r\n}\r\n\r\n.table-column {\r\n  padding: 5px;\r\n  margin-bottom: 10px;\r\n  border-left: 3px solid #409eff;\r\n  border-radius: 5px;\r\n  background: #fafafa;\r\n\r\n  /deep/ .el-form-item {\r\n    margin-bottom: 0;\r\n\r\n    .el-form-item__label {\r\n      height: 25px;\r\n    }\r\n  }\r\n\r\n  .table-column-action {\r\n    float: right;\r\n\r\n    span {\r\n      color: #afafaf;\r\n      margin-right: 10px;\r\n      font-size: 13px;\r\n    }\r\n\r\n    i {\r\n      color: #afafaf;\r\n      padding: 5px;\r\n      font-size: large;\r\n      cursor: pointer;\r\n\r\n      &:hover {\r\n        color: #666666;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.l-drag-from {\r\n  min-height: 50px;\r\n  background-color: rgb(245, 246, 246);\r\n\r\n  .l-form-item, li {\r\n    cursor: grab;\r\n    background: #ffffff;\r\n    padding: 10px;\r\n    border: 1px solid #ebecee;\r\n    margin: 5px 0;\r\n  }\r\n}\r\n\r\n.l-form-header {\r\n  font-size: small;\r\n  color: #818181;\r\n  text-align: left;\r\n  position: relative;\r\n  background-color: #fff;\r\n\r\n  p {\r\n    position: relative;\r\n    margin: 0 0 10px 0;\r\n\r\n    span {\r\n      position: absolute;\r\n      left: -8px;\r\n      top: 3px;\r\n      color: rgb(217, 0, 19);\r\n    }\r\n  }\r\n\r\n  .l-option {\r\n    position: absolute;\r\n    top: -10px;\r\n    right: -10px;\r\n\r\n    i {\r\n      font-size: large;\r\n      cursor: pointer;\r\n      color: #8c8c8c;\r\n      padding: 5px;\r\n\r\n      &:hover {\r\n        color: @theme-primary;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TableList.vue?vue&type=template&id=de0596e2&scoped=true&\"\nimport script from \"./TableList.vue?vue&type=script&lang=js&\"\nexport * from \"./TableList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TableList.vue?vue&type=style&index=0&id=de0596e2&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"de0596e2\",\n  null\n  \n)\n\nexport default component.exports","//混入组件数据\r\nexport default{\r\n  props:{\r\n    mode:{\r\n      type: String,\r\n      default: 'DESIGN'\r\n    },\r\n    required:{\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n  },\r\n  data(){\r\n    return {}\r\n  },\r\n  computed: {\r\n    _value: {\r\n      get() {\r\n        return this.value;\r\n      },\r\n      set(val) {\r\n        this.$emit(\"input\", val);\r\n      }\r\n    }\r\n  },\r\n}\r\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableList.vue?vue&type=style&index=0&id=de0596e2&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableList.vue?vue&type=style&index=0&id=de0596e2&lang=less&scoped=true&\""],"sourceRoot":""}