(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a44c3b3"],{"0bc7":function(e,t,r){},"24fd":function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return s}));var a=r("0c6d");function o(e){return Object(a["a"])({url:"org/tree",method:"get",params:e})}function l(e){return Object(a["a"])({url:"org/treeAll",method:"get",params:e})}function s(e){return Object(a["a"])({url:"org/tree/user/search",method:"get",params:e})}},3379:function(e,t,r){"use strict";var a=r("0bc7"),o=r.n(a);o.a},"3e07":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{padding:"20px"}},[r("el-form",{ref:"form",staticStyle:{width:"400px"},attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"姓名",prop:"name"}},[r("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[r("el-input",{attrs:{type:"phone"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),r("el-form-item",{attrs:{label:"性别"}},[r("el-radio-group",{model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[r("el-radio",{attrs:{label:1}},[e._v("男")]),r("el-radio",{attrs:{label:2}},[e._v("女")])],1)],1),r("el-form-item",{attrs:{label:"头像",prop:"avatarUrl"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{headers:e.uploadHeaders,action:e.uploadUrl,"show-file-list":!1,"on-success":e.handleAvatarSuccess}},[e.form.avatarUrl?r("img",{staticClass:"avatar",attrs:{src:e.form.avatarUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"部门",prop:"depIdList"}},[r("el-cascader",{staticStyle:{width:"100%"},attrs:{filterable:"",props:e.tableProps,options:e.tableData,"show-all-levels":!1},model:{value:e.form.depIdList,callback:function(t){e.$set(e.form,"depIdList",t)},expression:"form.depIdList"}})],1),r("el-form-item",{attrs:{label:"入职时间",prop:"entryDate"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{"picker-options":e.pickerOptions0,format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.entryDate,callback:function(t){e.$set(e.form,"entryDate",t)},expression:"form.entryDate"}})],1),e._l(e.form.userFieldDataList,(function(t,a){return r("el-form-item",{attrs:{label:t.name,prop:t.key}},["Number"===t.type?[r("el-input",{attrs:{type:"number"},model:{value:e.form[t.key],callback:function(r){e.$set(e.form,t.key,r)},expression:"form[item.key]"}})]:e._e(),"String"===t.type?[r("el-input",{model:{value:e.form[t.key],callback:function(r){e.$set(e.form,t.key,r)},expression:"form[item.key]"}})]:e._e(),"Date"===t.type?[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form[t.key],callback:function(r){e.$set(e.form,t.key,r)},expression:"form[item.key]"}})]:e._e(),"DateTime"===t.type?[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期"},model:{value:e.form[t.key],callback:function(r){e.$set(e.form,t.key,r)},expression:"form[item.key]"}})]:e._e(),"Time"===t.type?[r("el-time-picker",{staticStyle:{width:"100%"},attrs:{"arrow-control":"","value-format":"HH:mm:ss",format:"HH:mm:ss"},model:{value:e.form[t.key],callback:function(r){e.$set(e.form,t.key,r)},expression:"form[item.key]"}})]:e._e(),"Select"===t.type?[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form[t.key],callback:function(r){e.$set(e.form,t.key,r)},expression:"form[item.key]"}},e._l(e.jsonStringToJSON(t.configuration),(function(e){return r("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)]:e._e(),"MultiSelect"===t.type?[r("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.form[t.key],callback:function(r){e.$set(e.form,t.key,r)},expression:"form[item.key]"}},e._l(e.jsonStringToJSON(t.configuration),(function(e){return r("el-option",{attrs:{label:e.value,value:e.key}})})),1)]:e._e()],2)})),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("修改")]),r("el-button",{on:{click:e.back}},[e._v("返回")])],1)],2)],1)},o=[],l=(r("b0c0"),r("24fd")),s=r("c24f"),i=r("2957"),n={name:"index",components:{},data:function(){var e=function(e,t,r){return t&&/^\d{11}$/.test(t)?void r():r(new Error("请输入手机号"))};return{uploadHeaders:{cxygzl:localStorage.getItem("cxygzl")},pickerOptions0:{disabledDate:function(e){return e.getTime()>Date.now()-864e4}},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:e,trigger:"blur"}],avatarUrl:[{required:!0,message:"请上传头像",trigger:"blur"}],depIdList:[{required:!0,message:"请选择部门",trigger:"blur"}],entryDate:[{required:!0,message:"请选择入职时间",trigger:"blur"}]},uploadUrl:i["a"].BASE_URL+"/file/upload",tableData:[],tableProps:{value:"id",label:"name",checkStrictly:!0},form:{userFieldDataList:[],name:"",depIdList:[],entryDate:new Date,gender:1,avatarUrl:"",password:"",phone:"",id:void 0}}},watch:{},filters:{jsonStringToJson:function(e){return JSON.parse(e)}},mounted:function(){this.getOrg();var e=this.$route.query.id;this.getDetail(e),this.form.id=e},methods:{jsonStringToJSON:function(e){return JSON.parse(e)},getDetail:function(e){var t=this;Object(s["d"])({userId:e}).then((function(e){var r=e.data;t.form.name=r.name,t.form.gender=r.gender,t.form.password=r.password,t.form.avatarUrl=r.avatarUrl,t.form.phone=r.phone,t.form.entryDate=r.entryDate,t.form.depIdList=r.depIdList}))},back:function(){this.$router.push("/org/user")},getOrg:function(){var e=this,t=this;Object(l["b"])({deptId:0,isDept:!0}).then((function(e){t.tableData=e.data})).catch((function(t){e.$message.error(t.response.data)}))},handleAvatarSuccess:function(e,t,r){this.form.avatarUrl=e},onSubmit:function(){var e=this,t=JSON.parse(JSON.stringify(this.form)),r=this;this.$refs.form.validate((function(a){if(!a)return console.log("error submit!!"),!1;t.depId=t.depIdList[t.depIdList.length-1],t.fieldData=r.form,Object(s["b"])(t).then((function(e){r.$message.success(e.data),r.back()})).catch((function(t){e.$message.error(t.response.data)}))}))}}},m=n,c=(r("3379"),r("2877")),u=Object(c["a"])(m,a,o,!1,null,"9cf4ac38",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-3a44c3b3.39cd690b.js.map