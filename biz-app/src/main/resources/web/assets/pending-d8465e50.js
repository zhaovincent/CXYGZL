import{d as P,r as l,K as M,h as j,o as A,D as K,a as k,c as Q,a5 as e,w as n,P as G,l as N,f as r,a3 as f,as as E,am as J,k as T,q as W,aB as X}from"./index-e01dade3.js";import{v as Y}from"./el-loading-b076b1a7.js";import{E as Z}from"./el-drawer-51597e24.js";import{E as ee}from"./el-card-16bdf0d8.js";import{_ as oe}from"./index-1cadfa40.js";import{E as te,a as re}from"./el-table-column-7cf019e1.js";import"./el-checkbox-123bf6dd.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-ee5283d6.js";import"./el-scrollbar-f2029ad1.js";import{_ as ae,a as ie}from"./ViewProcessInstanceImage.vue_vue_type_script_setup_true_lang-80efc83b.js";import{_ as ne}from"./position-f826c78d.js";import"./el-tag-929563f7.js";import{_ as le}from"./FormRender.vue_vue_type_script_setup_true_lang-50f6b849.js";import{_ as pe}from"./agree.vue_vue_type_script_setup_true_lang-9f386c2f.js";import{_ as me}from"./refuse.vue_vue_type_script_setup_true_lang-f1cccf53.js";import{_ as se}from"./FlowNodeFormatData.vue_vue_type_script_setup_true_lang-b8400ff6.js";import{b as ue,e as de}from"./index-3a646217.js";import"./el-dialog-1471a1af.js";import"./refs-dd65b3fd.js";import"./el-select-c154265f.js";import"./strings-6464b592.js";import"./isEqual-47390e81.js";import"./_Uint8Array-aeb50f83.js";import"./debounce-bf37b7f7.js";import"./index-6b517de5.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./_baseClone-59dac119.js";import"./isArrayLikeObject-a5301880.js";import"./_overRest-a79e0547.js";import"./_baseFlatten-6e5398bc.js";import"./flatten-178b99bc.js";/* empty css                */import"./el-form-item-85be6a3a.js";import"./getFormWidget-4084fd80.js";import"./Date-e3a674b4.js";import"./el-date-picker-b8fb5128.js";import"./panel-time-pick-cbec15ad.js";import"./index-f7c59abe.js";import"./DateTime-e4a39557.js";import"./Description-c9397ba1.js";import"./Empty-b60a7a2f.js";import"./Input-741e75d5.js";import"./Money-53354be7.js";import"./el-input-number-182b17d2.js";import"./MultiSelect-f62683ec.js";import"./Number-4a71bbb3.js";import"./SelectDept-e55ebbaf.js";import"./selectAndShow.vue_vue_type_script_setup_true_lang-a708354f.js";import"./employeesDialog-3166dde1.js";import"./selectBox-a8819872.js";import"./el-avatar-63a3488d.js";/* empty css                */import"./index-8f0c79b2.js";import"./index-126d0406.js";import"./flow-2349aa77.js";import"./selectResult-ca10c7f8.js";import"./orgItem-da1d9713.js";import"./SelectMultiDept-865ded1b.js";import"./SelectMultiUser-f2df4170.js";import"./SelectUser-350b1f1c.js";import"./SingleSelect-4f2549a6.js";import"./Textarea-33dea2bf.js";import"./Time-5f63d134.js";import"./el-time-picker-1aa4e9cb.js";import"./UploadFile-9daeda9f.js";import"./el-progress-be452bc9.js";import"./index-f7c9196e.js";import"./UploadImage-8c59ffb5.js";import"./MultiUpload-c72eb43c.js";import"./plus-95522b44.js";import"./el-tab-pane-5b128a44.js";const ce={class:"app-container"},fe={style:{flex:"auto"}},Bo=P({__name:"pending",setup(_e){const s=l(!1),_=l(!1);l([]);const u=l(0),d=M({pageNum:1,pageSize:10}),w=l(),p=l(),x=t=>{p.value=t,ue(t.taskId,!1).then(o=>{m.value=o.data.formItems,s.value=!0})},m=l(),y=l(),D=t=>{for(var o of m.value){if(o.id!==t)continue;let a=o.props.value,g=o.props.oriForm;a.push(z.$deepCopy(g)),o.props.value=a}},V=(t,o)=>{for(var a of m.value)a.id===t&&a.props.value.splice(o,1)},{proxy:z}=j(),S=t=>{y.value.view(t)},b=l(),h=l();function v(){_.value=!0,de(d).then(({data:t})=>{w.value=t.records,u.value=t.total}).finally(()=>{_.value=!1})}const I=()=>{s.value=!1,v()},$=()=>{b.value.handle(p.value,m.value)},R=()=>{h.value.handle(p.value,m.value)};A(()=>{v()});const B=K(()=>{var t={};for(var o of m.value)t[o.id]=o.props.value;return t});return(t,o)=>{const a=te,g=ne,c=X,L=ie,F=re,O=oe,C=ee,U=Z,q=Y;return k(),Q("div",ce,[e(C,{shadow:"never"},{default:n(()=>[G((k(),N(F,{ref:"dataTableRef",data:r(w),"highlight-current-row":"",border:""},{default:n(()=>[e(a,{label:"分组",prop:"groupName",width:"100"}),e(a,{label:"流程",prop:"processName",width:"150"}),e(a,{label:"发起人",prop:"rootUserName",width:"150"}),e(a,{label:"发起时间",prop:"startTime",width:"200"}),e(a,{label:"当前节点",prop:"taskName",width:"200"}),e(a,{label:"任务时间",prop:"taskCreateTime",width:"200"}),e(a,{fixed:"right",label:"操作"},{default:n(i=>[e(c,{type:"primary",size:"small",link:"",onClick:H=>x(i.row)},{default:n(()=>[e(g),f(" 开始处理 ")]),_:2},1032,["onClick"]),e(c,{type:"primary",size:"small",link:"",onClick:H=>S(i.row)},{default:n(()=>[e(L),f(" 流程图 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[q,r(_)]]),r(u)>0?(k(),N(O,{key:0,total:r(u),"onUpdate:total":o[0]||(o[0]=i=>E(u)?u.value=i:null),page:r(d).pageNum,"onUpdate:page":o[1]||(o[1]=i=>r(d).pageNum=i),limit:r(d).pageSize,"onUpdate:limit":o[2]||(o[2]=i=>r(d).pageSize=i),onPagination:v},null,8,["total","page","limit"])):J("",!0)]),_:1}),e(U,{modelValue:r(s),"onUpdate:modelValue":o[3]||(o[3]=i=>E(s)?s.value=i:null),direction:"rtl",size:"400px"},{header:n(()=>{var i;return[T("h3",null,W((i=r(p))==null?void 0:i.processName),1)]}),default:n(()=>[e(C,{class:"box-card"},{default:n(()=>[e(le,{onAddLayoutOneItem:D,onDeleteLayoutOneItem:V,ref:"formRenderRef","form-list":r(m)},null,8,["form-list"])]),_:1}),e(se,{disableSelect:!0,formData:r(B),"task-id":r(p).taskId,processInstanceId:r(p).processInstanceId,"flow-id":r(p).flowId,ref:"flowNodeFormatRef"},null,8,["formData","task-id","processInstanceId","flow-id"])]),footer:n(()=>[T("div",fe,[e(c,{size:"large",type:"danger",onClick:R},{default:n(()=>[f("拒绝")]),_:1}),e(c,{size:"large",type:"primary",onClick:$},{default:n(()=>[f("提交")]),_:1})])]),_:1},8,["modelValue"]),e(ae,{ref_key:"viewImageRef",ref:y},null,512),e(pe,{onTaskSubmitEvent:I,ref_key:"agreeHandler",ref:b},null,512),e(me,{onTaskSubmitEvent:I,ref_key:"refuseHandler",ref:h},null,512)])}}});export{Bo as default};
