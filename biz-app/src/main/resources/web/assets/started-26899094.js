import{a as l,c as N,k as y,aO as F,d as H,r as n,K as L,o as O,D as j,a5 as e,w as r,P as A,l as m,f as a,a3 as p,am as b,as as x,q as K,aB as Q}from"./index-e01dade3.js";import{v as G}from"./el-loading-b076b1a7.js";import{E as J}from"./el-drawer-51597e24.js";import{E as W}from"./el-card-16bdf0d8.js";import{_ as X}from"./index-1cadfa40.js";import{E as Y,a as Z}from"./el-table-column-7cf019e1.js";import"./el-checkbox-123bf6dd.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-ee5283d6.js";import"./el-scrollbar-f2029ad1.js";import{_ as tt,a as et}from"./ViewProcessInstanceImage.vue_vue_type_script_setup_true_lang-80efc83b.js";import{_ as ot}from"./position-f826c78d.js";import{E as rt}from"./el-tag-929563f7.js";import{_ as at}from"./FormRender.vue_vue_type_script_setup_true_lang-50f6b849.js";import{_ as it}from"./FlowNodeFormatData.vue_vue_type_script_setup_true_lang-b8400ff6.js";import{g as nt,h as lt}from"./index-3a646217.js";import"./el-dialog-1471a1af.js";import"./refs-dd65b3fd.js";import"./el-select-c154265f.js";import"./strings-6464b592.js";import"./isEqual-47390e81.js";import"./_Uint8Array-aeb50f83.js";import"./debounce-bf37b7f7.js";import"./index-6b517de5.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./_baseClone-59dac119.js";import"./isArrayLikeObject-a5301880.js";import"./_overRest-a79e0547.js";import"./_baseFlatten-6e5398bc.js";import"./flatten-178b99bc.js";/* empty css                */import"./el-form-item-85be6a3a.js";import"./getFormWidget-4084fd80.js";import"./Date-e3a674b4.js";import"./el-date-picker-b8fb5128.js";import"./panel-time-pick-cbec15ad.js";import"./index-f7c59abe.js";import"./DateTime-e4a39557.js";import"./Description-c9397ba1.js";import"./Empty-b60a7a2f.js";import"./Input-741e75d5.js";import"./Money-53354be7.js";import"./el-input-number-182b17d2.js";import"./MultiSelect-f62683ec.js";import"./Number-4a71bbb3.js";import"./SelectDept-e55ebbaf.js";import"./selectAndShow.vue_vue_type_script_setup_true_lang-a708354f.js";import"./employeesDialog-3166dde1.js";import"./selectBox-a8819872.js";import"./el-avatar-63a3488d.js";/* empty css                */import"./index-8f0c79b2.js";import"./index-126d0406.js";import"./flow-2349aa77.js";import"./selectResult-ca10c7f8.js";import"./orgItem-da1d9713.js";import"./SelectMultiDept-865ded1b.js";import"./SelectMultiUser-f2df4170.js";import"./SelectUser-350b1f1c.js";import"./SingleSelect-4f2549a6.js";import"./Textarea-33dea2bf.js";import"./Time-5f63d134.js";import"./el-time-picker-1aa4e9cb.js";import"./UploadFile-9daeda9f.js";import"./el-progress-be452bc9.js";import"./index-f7c9196e.js";import"./UploadImage-8c59ffb5.js";import"./MultiUpload-c72eb43c.js";import"./plus-95522b44.js";import"./el-tab-pane-5b128a44.js";const st={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},pt=y("path",{fill:"currentColor",d:"M224 448a32 32 0 0 0-32 32v384a32 32 0 0 0 32 32h576a32 32 0 0 0 32-32V480a32 32 0 0 0-32-32H224zm0-64h576a96 96 0 0 1 96 96v384a96 96 0 0 1-96 96H224a96 96 0 0 1-96-96V480a96 96 0 0 1 96-96z"},null,-1),mt=y("path",{fill:"currentColor",d:"M512 544a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V576a32 32 0 0 1 32-32zm192-160v-64a192 192 0 1 0-384 0v64h384zM512 64a256 256 0 0 1 256 256v128H256V320A256 256 0 0 1 512 64z"},null,-1),ct=[pt,mt];function ut(v,I){return l(),N("svg",st,ct)}const dt={name:"ep-lock",render:ut};function _t(v){return F({url:"process-instance/detail",method:"get",params:v})}const ft={class:"app-container"},Be=H({__name:"started",setup(v){function I(i){nt({processInstanceId:i.processInstanceId}).then(o=>{h()})}const d=n(!1),g=n(!1);n([]);const c=n(0),u=L({pageNum:1,pageSize:10}),C=n(),_=n(),T=i=>{_.value=i,_t({processInstanceId:i.processInstanceId}).then(o=>{console.log(o),w.value=o.data.formItems,d.value=!0})},w=n(),V=n(),D=i=>{V.value.view(i)};n(),n();function h(){g.value=!0,lt(u).then(({data:i})=>{C.value=i.records,c.value=i.total}).finally(()=>{g.value=!1})}O(()=>{h()});const B=j(()=>{var i={};for(var o of w.value)i[o.id]=o.props.value;return i});return(i,o)=>{const s=Y,f=rt,R=ot,k=Q,$=dt,S=et,M=Z,P=X,z=W,U=J,q=G;return l(),N("div",ft,[e(z,{shadow:"never"},{default:r(()=>[A((l(),m(M,{ref:"dataTableRef",data:a(C),"highlight-current-row":"",border:""},{default:r(()=>[e(s,{label:"分组",prop:"groupName",width:"100"}),e(s,{label:"流程",prop:"name",width:"150"}),e(s,{label:"发起时间",prop:"createTime",width:"200"}),e(s,{label:"结束时间",prop:"endTime",width:"200"}),e(s,{label:"状态",prop:"taskCreateTime",width:"150"},{default:r(t=>[t.row.status==1?(l(),m(f,{key:0,type:"success"},{default:r(()=>[p("进行中")]),_:1})):(l(),m(f,{key:1},{default:r(()=>[p("已结束")]),_:1}))]),_:1}),e(s,{label:"审批结果",prop:"taskCreateTime",width:"150"},{default:r(t=>[t.row.result===!0?(l(),m(f,{key:0,type:"success"},{default:r(()=>[p("通过")]),_:1})):b("",!0),t.row.result===!1?(l(),m(f,{key:1,type:"danger"},{default:r(()=>[p("拒绝")]),_:1})):b("",!0)]),_:1}),e(s,{fixed:"right",label:"操作"},{default:r(t=>[e(k,{type:"primary",size:"small",link:"",onClick:E=>T(t.row)},{default:r(()=>[e(R),p(" 查看 ")]),_:2},1032,["onClick"]),e(k,{disabled:t.row.status!=1,type:"primary",size:"small",link:"",onClick:E=>I(t.row)},{default:r(()=>[e($),p(" 终止流程 ")]),_:2},1032,["disabled","onClick"]),e(k,{type:"primary",size:"small",link:"",onClick:E=>D(t.row)},{default:r(()=>[e(S),p(" 流程图 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[q,a(g)]]),a(c)>0?(l(),m(P,{key:0,total:a(c),"onUpdate:total":o[0]||(o[0]=t=>x(c)?c.value=t:null),page:a(u).pageNum,"onUpdate:page":o[1]||(o[1]=t=>a(u).pageNum=t),limit:a(u).pageSize,"onUpdate:limit":o[2]||(o[2]=t=>a(u).pageSize=t),onPagination:h},null,8,["total","page","limit"])):b("",!0)]),_:1}),e(U,{modelValue:a(d),"onUpdate:modelValue":o[3]||(o[3]=t=>x(d)?d.value=t:null),direction:"rtl",size:"400px"},{header:r(()=>{var t;return[y("h3",null,K((t=a(_))==null?void 0:t.name),1)]}),default:r(()=>[e(z,{class:"box-card"},{default:r(()=>[e(at,{ref:"formRenderRef","form-list":a(w)},null,8,["form-list"])]),_:1}),e(it,{disableSelect:!0,formData:a(B),processInstanceId:a(_).processInstanceId,"flow-id":a(_).flowId,ref:"flowNodeFormatRef"},null,8,["formData","processInstanceId","flow-id"])]),_:1},8,["modelValue"]),e(tt,{ref_key:"viewImageRef",ref:V},null,512)])}}});export{Be as default};
