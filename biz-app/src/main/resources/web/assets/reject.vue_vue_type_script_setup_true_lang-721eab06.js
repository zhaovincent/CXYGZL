import{d as U,r as u,h as R,D as j,a as h,c as D,a5 as c,w as f,k as M,a3 as b,f as m,as as g,R as q,a6 as z,l as G,aC as H,aD as J}from"./index-d5547550.js";/* empty css                  */import"./el-tag-de6752b8.js";import{E as K,a as P}from"./el-select-46753b34.js";import"./el-scrollbar-cbe0c54f.js";import"./el-popper-00977718.js";import{a as Q}from"./index-8f215b9b.js";import{E as W}from"./index-a6355ec2.js";const X={class:"dialog-footer"},re=U({__name:"reject",emits:["taskSubmitEvent"],setup(Y,{expose:B,emit:$}){const i=u(!1),_=u(""),y=u(""),x=u(),E=u(),k=u(""),I=u(""),w=u(""),{proxy:d}=R();var L=j(()=>{let s=[];const e=[0,1];var a={},l={};N(void 0,I.value,a,l,!0);var r=a[k.value];if(r==null)return[];for(var t of r){var n=l[t].type;e.indexOf(n)>-1&&l[t].id!=k.value&&s.push({id:l[t].id,name:l[t].nodeName})}return s});function N(s,e,a,l,r){if(d.$isNode(e)){var t=e.id;if(l[t]=e,d.$isNotBlank(s)){var o=a[s];let C=l[s].type;if((C==5||C==8)&&!r)a[t]=[];else{var p=d.$deepCopy(o);p.push(t),a[t]=p}}else{var n=[];n.push(t),a[t]=n}var v=e.type,V=e.childNode;if(v===5||v===8||v===4){var S=e.conditionNodes;for(var F of S)N(t,F,a,l,!1);d.$isNode(V)&&N(t,V,a,l,!0)}else d.$isNode(V)&&N(t,V,a,l,!0)}}B({handle:(s,e,a,l,r)=>{w.value=r,x.value=s,E.value=e,k.value=a,I.value=l,i.value=!0}});const T=()=>{let s=E.value;var e={};for(var a of s)if(e[a.id]=a.props.value,a.type==="Layout"){let p=a.props.value;var l=[];for(var r of p){var t={};for(var n of r){let v=n.props.value;t[n.id]=v}l.push(t)}e[a.id]=l}var o={paramMap:e,taskId:x.value.taskId,nodeId:k.value,targetNodeId:y.value,processInstanceId:x.value.processInstanceId,approveDesc:_.value};Q(o).then(p=>{i.value=!1,$("taskSubmitEvent")})};return(s,e)=>{const a=K,l=P,r=H,t=J,n=W;return h(),D("div",null,[c(n,{modelValue:m(i),"onUpdate:modelValue":e[3]||(e[3]=o=>g(i)?i.value=o:null),title:m(w),width:"400px"},{footer:f(()=>[M("span",X,[c(t,{onClick:e[2]||(e[2]=o=>i.value=!1)},{default:f(()=>[b("取消")]),_:1}),c(t,{type:"primary",onClick:T},{default:f(()=>[b(" 确定 ")]),_:1})])]),default:f(()=>[c(l,{modelValue:m(y),"onUpdate:modelValue":e[0]||(e[0]=o=>g(y)?y.value=o:null),placeholder:"驳回节点",style:{width:"100%","margin-bottom":"20px"}},{default:f(()=>[(h(!0),D(q,null,z(m(L),o=>(h(),G(a,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),c(r,{modelValue:m(_),"onUpdate:modelValue":e[1]||(e[1]=o=>g(_)?_.value=o:null),type:"textarea",maxlength:"100",rows:5,placeholder:"审核意见","show-word-limit":""},null,8,["modelValue"])]),_:1},8,["modelValue","title"])])}}});export{re as _};
