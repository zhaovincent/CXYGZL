import{d as P,D as s,h as q,r as J,o as R,a as i,c,a5 as z,w as x,R as f,a6 as S,l as u,f as y,as as K,am as p,k as M,aC as G}from"./index-d5547550.js";import{g as Q,a as W,E as X}from"./area-23a735cb.js";import"./el-popper-00977718.js";import"./el-tag-de6752b8.js";/* empty css                    */import"./el-radio-92787871.js";import"./el-scrollbar-cbe0c54f.js";import{E as Z}from"./el-time-picker-f79f3178.js";import{E as _}from"./el-date-picker-2b967550.js";import{E as ee}from"./el-input-number-f4eeab94.js";import{E as te,a as oe}from"./el-select-46753b34.js";import{u as le}from"./flow-165b4256.js";import{q as ne}from"./index-6e9421a4.js";import{_ as N}from"./selectAndShow.vue_vue_type_script_setup_true_lang-9eafc7ba.js";import{c as O}from"./const-a11e1fef.js";import{_ as ie}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-222e6800.js";import"./isEqual-fe47b28a.js";import"./_Uint8Array-c7447712.js";import"./flatten-36990bb8.js";import"./_baseFlatten-c80c9ba3.js";import"./_overRest-d3d6b67b.js";import"./strings-fbdcd853.js";import"./arrays-e667dc24.js";import"./cloneDeep-cfc40afc.js";import"./_baseClone-e7eb389f.js";import"./index-e8e7f773.js";import"./debounce-e2bc871f.js";import"./panel-time-pick-ae955f65.js";import"./index-da53d962.js";import"./isArrayLikeObject-724a27ce.js";import"./employeesDialog-54936475.js";/* empty css                  */import"./selectBox-26a3a753.js";/* empty css                  *//* empty css                */import"./selectBox.vue_vue_type_style_index_0_scoped_82c14c6c_lang-f1c14f73.js";import"./index-a7c7b111.js";import"./index-85bc974f.js";import"./selectResult-4abbf083.js";/* empty css                                                                     *//* empty css                                                                        */import"./index-a6355ec2.js";import"./use-dialog-27a1e524.js";import"./refs-5fd04da2.js";import"./orgItem-a67c9471.js";const ae={style:{"margin-top":"20px"}},re={style:{"margin-top":"20px"}},ue=P({__name:"condition",props:{condition:{type:Object,default:()=>{}}},setup(a){const l=a;let F=le();const U=s(()=>F.step2),{proxy:k}=q(),b=s(()=>{let o=U.value,e=k.$deepCopy(o.filter(n=>n.type!="SelectMultiUser"&&n.type!="SelectMultiDept"&&n.type!="Description"&&n.type!="Layout"&&n.type!="UploadImage"&&n.type!="UploadFile"));return e.push({id:"root",name:"发起人",type:"SelectUser",typeName:"用户"}),e}),v=s(()=>{var o={};for(var e of b.value)o[e.id]=e;return o});var E=W,m=J([]);R(()=>{ne().then(o=>{m.value=o.data.filter(e=>e.type!="MultiSelect"),m.value.push({key:"range",type:"SelectUser",name:"范围"}),m.value.push({key:"empty",type:"",name:"为空"}),m.value.push({key:"notempty",type:"",name:"不为空"}),l.condition.userKeyFieldList=m.value})});const T=()=>{l.condition.expression="",l.condition.value=void 0,l.condition.userKey=""},Y=()=>{l.condition.expression="",l.condition.value=void 0},B=s(()=>{var e;return(e=v.value[l.condition.key])==null?void 0:e.type}),r=s(()=>{var n;let o=(n=v.value[l.condition.key])==null?void 0:n.type;if(o!="SelectUser")return o;if(k.$isBlank(l.condition.userKey))return"";let e=m.value.filter(d=>d.key===l.condition.userKey);return!e||e.length==0?"":e[0].type}),D=s(()=>{var n;return((n=v.value[l.condition.key])==null?void 0:n.type)!="SelectUser"?v.value[l.condition.key].props.options:k.$isBlank(l.condition.userKey)?[]:JSON.parse(m.value.filter(d=>d.key===l.condition.userKey)[0].props).options}),I=s(()=>{let o=v.value[l.condition.key];return(o==null?void 0:o.type)!="SelectUser"?o.props.radixNum:k.$isBlank(l.condition.userKey)?[]:JSON.parse(m.value.filter(d=>d.key===l.condition.userKey)[0].props).radixNum});var g=s({get(){var o;return(o=l.condition.value)==null?void 0:o.value},set(o){l.condition.value=Q(E,o)}}),V=s({get(){return l.condition.key},set(o){if(l.condition.key=o,o==="root")l.condition.keyType="SelectUser";else{let e=U.value.filter(n=>n.id===o);e.length>0&&(l.condition.keyType=e[0].type)}}});const h=s({get(){let o=l.condition.value;return o&&o.length>0?o.map(e=>e.key):void 0},set(o){let e=D.value.filter(n=>o.indexOf(n.key)>=0);l.condition.value=e}});return(o,e)=>{var C,L;const n=te,d=oe,j=G,H=ee,w=_,$=Z,A=X;return i(),c("div",null,[z(d,{modelValue:y(V),"onUpdate:modelValue":e[0]||(e[0]=t=>K(V)?V.value=t:V=t),onChange:T,placeholder:"选择表单",style:{width:"100%"}},{default:x(()=>[(i(!0),c(f,null,S(b.value,t=>(i(),u(n,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),B.value==="SelectUser"?(i(),u(d,{key:0,onChange:Y,modelValue:a.condition.userKey,"onUpdate:modelValue":e[1]||(e[1]=t=>a.condition.userKey=t),placeholder:"选择用户属性",style:{width:"100%","margin-top":"20px"}},{default:x(()=>[(i(!0),c(f,null,S(y(m),t=>(i(),u(n,{key:t.key,label:t.name,value:t.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):p("",!0),((C=y(O)[r.value])==null?void 0:C.length)>0?(i(),u(d,{key:1,modelValue:a.condition.expression,"onUpdate:modelValue":e[2]||(e[2]=t=>a.condition.expression=t),placeholder:"选择关系",style:{width:"100%","margin-top":"20px"}},{default:x(()=>[(i(!0),c(f,null,S(y(O)[r.value],t=>(i(),u(n,{key:t.key,label:t.name,value:t.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):p("",!0),((L=a.condition.expression)==null?void 0:L.indexOf("empty"))<0?(i(),c(f,{key:2},[r.value==="Input"||r.value==="Textarea"?(i(),u(j,{key:0,modelValue:a.condition.value,"onUpdate:modelValue":e[3]||(e[3]=t=>a.condition.value=t),style:{"margin-top":"20px"},placeholder:"条件值"},null,8,["modelValue"])):p("",!0),r.value==="Money"||r.value==="Number"||r.value==="Score"?(i(),u(H,{key:1,modelValue:a.condition.value,"onUpdate:modelValue":e[4]||(e[4]=t=>a.condition.value=t),precision:I.value,placeholder:"条件值",style:{width:"100%","margin-top":"20px"},"controls-position":"right"},null,8,["modelValue","precision"])):p("",!0),r.value==="Date"?(i(),u(w,{key:2,"value-format":"YYYY-MM-DD",type:"date",class:"formDate",modelValue:a.condition.value,"onUpdate:modelValue":e[5]||(e[5]=t=>a.condition.value=t),placeholder:"条件值",style:{width:"100%","margin-top":"20px"}},null,8,["modelValue"])):p("",!0),r.value==="Time"?(i(),u($,{key:3,"arrow-control":"","value-format":"HH:mm:ss",class:"formDate",modelValue:a.condition.value,"onUpdate:modelValue":e[6]||(e[6]=t=>a.condition.value=t),placeholder:"条件值",style:{width:"100%","margin-top":"20px"}},null,8,["modelValue"])):p("",!0),r.value==="DateTime"?(i(),u(w,{key:4,"value-format":"YYYY-MM-DD HH:mm:ss",type:"datetime",class:"formDate",modelValue:a.condition.value,"onUpdate:modelValue":e[7]||(e[7]=t=>a.condition.value=t),placeholder:"条件值",style:{width:"100%","margin-top":"20px"}},null,8,["modelValue"])):p("",!0),r.value==="Area"?(i(),u(A,{key:5,style:{width:"100%","margin-top":"20px"},options:y(E),clearable:"",props:{checkStrictly:!0,value:"code",label:"name"},modelValue:y(g),"onUpdate:modelValue":e[8]||(e[8]=t=>K(g)?g.value=t:g=t)},null,8,["options","modelValue"])):p("",!0),r.value==="SingleSelect"||r.value==="MultiSelect"?(i(),u(d,{key:6,modelValue:h.value,"onUpdate:modelValue":e[9]||(e[9]=t=>h.value=t),style:{width:"100%","margin-top":"20px"},multiple:"","collapse-tags":"","collapse-tags-tooltip":"",placeholder:"请选择值"},{default:x(()=>[(i(!0),c(f,null,S(D.value,t=>(i(),u(n,{key:t.key,label:t.value,value:t.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):p("",!0),M("div",ae,[r.value==="SelectDept"?(i(),u(N,{key:0,orgList:a.condition.value,"onUpdate:orgList":e[10]||(e[10]=t=>a.condition.value=t),type:"dept",multiple:!0},null,8,["orgList"])):p("",!0)]),M("div",re,[r.value==="SelectUser"?(i(),u(N,{key:0,orgList:a.condition.value,"onUpdate:orgList":e[11]||(e[11]=t=>a.condition.value=t),type:"org",multiple:!0},null,8,["orgList"])):p("",!0)])],64)):p("",!0)])}}});const tt=ie(ue,[["__scopeId","data-v-c64a9ee8"]]);export{tt as default};
