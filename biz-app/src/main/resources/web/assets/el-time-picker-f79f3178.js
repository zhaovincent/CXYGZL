import{f as Se,u as Te,g as _e,h as W,d as x,i as Pe,c as we,t as Ce,T as De,j as xe,C as Re}from"./panel-time-pick-ae955f65.js";import{b as Ve,g as Ae,_ as Oe,d as J,bq as Ee,u as Z,j as Ie,D as T,r as Q,a as Me,c as Ne,k,n as v,f as l,q as A,a5 as E,am as Be,bi as U,x as Fe,p as He,z as Ue}from"./index-d5547550.js";import{b as je}from"./_baseFlatten-c80c9ba3.js";import{b as ye,i as Ke}from"./isArrayLikeObject-724a27ce.js";import{s as X,S as $e,c as qe}from"./isEqual-fe47b28a.js";import{q as j}from"./_Uint8Array-c7447712.js";function Le(){}function ze(t,s,o,i){for(var c=t.length,u=o+(i?1:-1);i?u--:++u<c;)if(s(t[u],u,t))return u;return-1}function Ge(t){return t!==t}function Ye(t,s,o){for(var i=o-1,c=t.length;++i<c;)if(t[i]===s)return i;return-1}function We(t,s,o){return s===s?Ye(t,s,o):ze(t,Ge,o)}function Ze(t,s){var o=t==null?0:t.length;return!!o&&We(t,s,0)>-1}function Je(t,s,o){for(var i=-1,c=t==null?0:t.length;++i<c;)if(o(s,t[i]))return!0;return!1}var Qe=1/0,Xe=j&&1/X(new j([,-0]))[1]==Qe?function(t){return new j(t)}:Le;const en=Xe;var nn=200;function tn(t,s,o){var i=-1,c=Ze,u=t.length,a=!0,d=[],b=d;if(o)a=!1,c=Je;else if(u>=nn){var _=s?null:en(t);if(_)return X(_);a=!1,c=qe,b=new $e}else b=s?[]:d;e:for(;++i<u;){var g=t[i],S=s?s(g):g;if(g=o||g!==0?g:0,a&&S===S){for(var R=b.length;R--;)if(b[R]===S)continue e;s&&b.push(S),d.push(g)}else c(b,S,o)||(b!==d&&b.push(S),d.push(g))}return d}var an=ye(function(t){return tn(je(t,1,Ke,!0))});const y=an,sn=Ve({...Se,parsedValue:{type:Ae(Array)}}),on=["disabled"],ln=J({__name:"panel-time-range",props:sn,emits:["pick","select-range","set-picker-option"],setup(t,{emit:s}){const o=t,i=(e,n)=>{const r=[];for(let p=e;p<=n;p++)r.push(p);return r},{t:c,lang:u}=Ee(),a=Z("time"),d=Z("picker"),b=Ie("EP_PICKER_BASE"),{arrowControl:_,disabledHours:g,disabledMinutes:S,disabledSeconds:R,defaultValue:I}=b.props,ee=T(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",_),C.value?"has-seconds":""]),ne=T(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",_),C.value?"has-seconds":""]),P=T(()=>o.parsedValue[0]),w=T(()=>o.parsedValue[1]),te=Te(o),ae=()=>{s("pick",te.value,!1)},C=T(()=>o.format.includes("ss")),K=T(()=>o.format.includes("A")?"A":o.format.includes("a")?"a":""),se=(e=!1)=>{s("pick",[P.value,w.value],e)},oe=e=>{$(e.millisecond(0),w.value)},le=e=>{$(P.value,e.millisecond(0))},re=e=>{const n=e.map(p=>x(p).locale(u.value)),r=L(n);return n[0].isSame(r[0])&&n[1].isSame(r[1])},$=(e,n)=>{s("pick",[e,n],!0)},ie=T(()=>P.value>w.value),V=Q([0,2]),ce=(e,n)=>{s("select-range",e,n,"min"),V.value=[e,n]},q=T(()=>C.value?11:8),ue=(e,n)=>{s("select-range",e,n,"max");const r=l(q);V.value=[e+r,n+r]},de=e=>{const n=C.value?[0,3,6,11,14,17]:[0,3,8,11],r=["hours","minutes"].concat(C.value?["seconds"]:[]),m=(n.indexOf(V.value[0])+e+n.length)%n.length,f=n.length/2;m<f?F.start_emitSelectRange(r[m]):F.end_emitSelectRange(r[m-f])},pe=e=>{const n=e.code,{left:r,right:p,up:m,down:f}=Fe;if([r,p].includes(n)){de(n===r?-1:1),e.preventDefault();return}if([m,f].includes(n)){const h=n===m?-1:1,D=V.value[0]<q.value?"start":"end";F[`${D}_scrollDown`](h),e.preventDefault();return}},M=(e,n)=>{const r=g?g(e):[],p=e==="start",f=(n||(p?w.value:P.value)).hour(),h=p?i(f+1,23):i(0,f-1);return y(r,h)},N=(e,n,r)=>{const p=S?S(e,n):[],m=n==="start",f=r||(m?w.value:P.value),h=f.hour();if(e!==h)return p;const D=f.minute(),H=m?i(D+1,59):i(0,D-1);return y(p,H)},B=(e,n,r,p)=>{const m=R?R(e,n,r):[],f=r==="start",h=p||(f?w.value:P.value),D=h.hour(),H=h.minute();if(e!==D||n!==H)return m;const Y=h.second(),ke=f?i(Y+1,59):i(0,Y-1);return y(m,ke)},L=([e,n])=>[z(e,"start",!0,n),z(n,"end",!1,e)],{getAvailableHours:me,getAvailableMinutes:fe,getAvailableSeconds:be}=_e(M,N,B),{timePickerOptions:F,getAvailableTime:z,onSetOption:G}=Pe({getAvailableHours:me,getAvailableMinutes:fe,getAvailableSeconds:be}),ve=e=>e?U(e)?e.map(n=>x(n,o.format).locale(u.value)):x(e,o.format).locale(u.value):null,ge=e=>e?U(e)?e.map(n=>n.format(o.format)):e.format(o.format):null,he=()=>{if(U(I))return I.map(n=>x(n).locale(u.value));const e=x(I).locale(u.value);return[e,e.add(60,"m")]};return s("set-picker-option",["formatToString",ge]),s("set-picker-option",["parseUserInput",ve]),s("set-picker-option",["isValidValue",re]),s("set-picker-option",["handleKeydownInput",pe]),s("set-picker-option",["getDefaultValue",he]),s("set-picker-option",["getRangeAvailableTime",L]),(e,n)=>e.actualVisible?(Me(),Ne("div",{key:0,class:v([l(a).b("range-picker"),l(d).b("panel")])},[k("div",{class:v(l(a).be("range-picker","content"))},[k("div",{class:v(l(a).be("range-picker","cell"))},[k("div",{class:v(l(a).be("range-picker","header"))},A(l(c)("el.datepicker.startTime")),3),k("div",{class:v(l(ee))},[E(W,{ref:"minSpinner",role:"start","show-seconds":l(C),"am-pm-mode":l(K),"arrow-control":l(_),"spinner-date":l(P),"disabled-hours":M,"disabled-minutes":N,"disabled-seconds":B,onChange:oe,onSetOption:l(G),onSelectRange:ce},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),k("div",{class:v(l(a).be("range-picker","cell"))},[k("div",{class:v(l(a).be("range-picker","header"))},A(l(c)("el.datepicker.endTime")),3),k("div",{class:v(l(ne))},[E(W,{ref:"maxSpinner",role:"end","show-seconds":l(C),"am-pm-mode":l(K),"arrow-control":l(_),"spinner-date":l(w),"disabled-hours":M,"disabled-minutes":N,"disabled-seconds":B,onChange:le,onSetOption:l(G),onSelectRange:ue},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),k("div",{class:v(l(a).be("panel","footer"))},[k("button",{type:"button",class:v([l(a).be("panel","btn"),"cancel"]),onClick:n[0]||(n[0]=r=>ae())},A(l(c)("el.datepicker.cancel")),3),k("button",{type:"button",class:v([l(a).be("panel","btn"),"confirm"]),disabled:l(ie),onClick:n[1]||(n[1]=r=>se())},A(l(c)("el.datepicker.confirm")),11,on)],2)],2)):Be("v-if",!0)}});var rn=Oe(ln,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-range.vue"]]);x.extend(we);var cn=J({name:"ElTimePicker",install:null,props:{...Ce,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,s){const o=Q(),[i,c]=t.isRange?["timerange",rn]:["time",De],u=a=>s.emit("update:modelValue",a);return He("ElPopperOptions",t.popperOptions),s.expose({focus:a=>{var d;(d=o.value)==null||d.handleFocusInput(a)},blur:a=>{var d;(d=o.value)==null||d.handleBlurInput(a)},handleOpen:()=>{var a;(a=o.value)==null||a.handleOpen()},handleClose:()=>{var a;(a=o.value)==null||a.handleClose()}}),()=>{var a;const d=(a=t.format)!=null?a:xe;return E(Re,Ue(t,{ref:o,type:i,format:d,"onUpdate:modelValue":u}),{default:b=>E(c,b,null)})}}});const O=cn;O.install=t=>{t.component(O.name,O)};const vn=O;export{vn as E};
