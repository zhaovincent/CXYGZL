import{r as B,D as i,L as I,a as L,l as w,w as n,a5 as p,a3 as _,k as m,P as N,as as f,f as o,cA as C,aB as E}from"./index-e01dade3.js";import{E as R}from"./el-dialog-1471a1af.js";import{r as A,c as T,s as u,b as U,a as M}from"./selectBox-a8819872.js";import P from"./selectResult-ca10c7f8.js";import{$ as g}from"./index-126d0406.js";import"./refs-dd65b3fd.js";import"./el-avatar-63a3488d.js";import"./el-checkbox-123bf6dd.js";import"./isEqual-47390e81.js";import"./_Uint8Array-aeb50f83.js";import"./flatten-178b99bc.js";import"./_baseFlatten-6e5398bc.js";import"./_overRest-a79e0547.js";/* empty css                */import"./index-8f0c79b2.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./flow-2349aa77.js";const $={class:"person_body clear"},j={class:"person_tree l"},ae={__name:"roleDialog",props:{visible:{type:Boolean,default:!1},data:{type:Array,default:()=>[]}},emits:["update:visible","change"],setup(y,{emit:c}){const d=y;let l=B([]),b=i(()=>[{type:"role",not:!0,data:A.value,isActive:e=>g.toggleClass(l.value,e,"roleId"),change:e=>{l.value=[e]}}]),D=i(()=>[{type:"role",data:l.value,cancel:e=>g.removeEle(l.value,e,"roleId")}]),s=i({get(){return d.visible},set(e){v()}});I(()=>d.visible,e=>{e&&(T(),u.value="",l.value=d.data.map(({name:t,targetId:r})=>({roleName:t,roleId:r})))});let h=i(()=>l.value.length);const x=()=>{let e=l.value.map(t=>({type:2,targetId:t.roleId,name:t.roleName}));c("change",e)},V=()=>{l.value=[]},v=()=>{c("update:visible",!1)};return(e,t)=>{const r=E,k=R;return L(),w(k,{title:"选择角色",modelValue:o(s),"onUpdate:modelValue":t[2]||(t[2]=a=>f(s)?s.value=a:s=a),width:600,"append-to-body":"",class:"promoter_person"},{footer:n(()=>[p(r,{onClick:v},{default:n(()=>[_("取 消")]),_:1}),p(r,{type:"primary",onClick:x},{default:n(()=>[_("确 定")]),_:1})]),default:n(()=>[m("div",$,[m("div",j,[N(m("input",{type:"text",placeholder:"搜索角色","onUpdate:modelValue":t[0]||(t[0]=a=>f(u)?u.value=a:null),onInput:t[1]||(t[1]=a=>o(U)(a,2))},null,544),[[C,o(u)]]),p(M,{list:o(b)},null,8,["list"])]),p(P,{total:o(h),onDel:V,list:o(D)},null,8,["total","list"])])]),_:1},8,["modelValue"])}}};export{ae as default};
