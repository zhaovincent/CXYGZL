import{d as T,u as L,p as $,N as V,e as U,b as q,i as O,D as P,a as t,c as o,k as r,n as y,f as n,au as j,l as h,w as p,m as A,E as J,am as d,q as i,_ as M,s as R,v as K,h as Q,a2 as G,a5 as g,R as k,a6 as x,et as H,bC as W,aQ as X,ef as Y,a3 as f,a9 as Z,r as E,L as ee,o as te}from"./index-d5547550.js";import{E as se,a as ae}from"./el-tab-pane-a6cb13f9.js";import{E as le}from"./el-divider-6edec4d7.js";import{E as oe}from"./el-text-a7cd3acd.js";import{E as re}from"./el-tag-de6752b8.js";/* empty css                  */import{_ as ne}from"./selectAndShow.vue_vue_type_script_setup_true_lang-9eafc7ba.js";import{E as ie}from"./index-85bc974f.js";import{_ as ce}from"./_plugin-vue_export-helper-c27b6911.js";import{f as de}from"./index-8f215b9b.js";const pe=T({name:"ElTimeline",setup(c,{slots:_}){const s=L("timeline");return $("timeline",_),()=>V("ul",{class:[s.b()]},[U(_,"default")])}}),ue=q({timestamp:{type:String,default:""},hideTimestamp:{type:Boolean,default:!1},center:{type:Boolean,default:!1},placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:O},hollow:{type:Boolean,default:!1}}),me=T({name:"ElTimelineItem"}),fe=T({...me,props:ue,setup(c){const _=c,s=L("timeline-item"),w=P(()=>[s.e("node"),s.em("node",_.size||""),s.em("node",_.type||""),s.is("hollow",_.hollow)]);return(l,b)=>(t(),o("li",{class:y([n(s).b(),{[n(s).e("center")]:l.center}])},[r("div",{class:y(n(s).e("tail"))},null,2),l.$slots.dot?d("v-if",!0):(t(),o("div",{key:0,class:y(n(w)),style:j({backgroundColor:l.color})},[l.icon?(t(),h(n(J),{key:0,class:y(n(s).e("icon"))},{default:p(()=>[(t(),h(A(l.icon)))]),_:1},8,["class"])):d("v-if",!0)],6)),l.$slots.dot?(t(),o("div",{key:1,class:y(n(s).e("dot"))},[U(l.$slots,"dot")],2)):d("v-if",!0),r("div",{class:y(n(s).e("wrapper"))},[!l.hideTimestamp&&l.placement==="top"?(t(),o("div",{key:0,class:y([n(s).e("timestamp"),n(s).is("top")])},i(l.timestamp),3)):d("v-if",!0),r("div",{class:y(n(s).e("content"))},[U(l.$slots,"default")],2),!l.hideTimestamp&&l.placement==="bottom"?(t(),o("div",{key:1,class:y([n(s).e("timestamp"),n(s).is("bottom")])},i(l.timestamp),3)):d("v-if",!0)],2)],2))}});var B=M(fe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/timeline/src/timeline-item.vue"]]);const _e=R(pe,{TimelineItem:B}),ye=K(B);const he={style:{padding:"10px"}},ve={key:0,style:{color:"red"}},ge={style:{display:"flex","flex-direction":"row"}},we={class:"f21"},be={class:"f22"},ke={key:0},Se={key:2,style:{display:"flex","flex-direction":"row","flex-wrap":"wrap"}},Ie={class:"node-show"},Te={style:{overflow:"hidden"}},Ne={class:"d1"},xe={style:{height:"60px","padding-top":"20px"}},Ee={style:{"font-size":"8px","text-align":"center"}},Ue={style:{display:"flex","flex-direction":"row"}},De={class:"f1"},ze={class:"f2"},Le={style:{height:"40px","line-height":"40px","font-size":"10px"},class:"f4"},Be={key:0},Ce={class:"box-card",style:{padding:"5px","background-color":"var(--el-fill-color-light)"}},Fe={style:{padding:"0px 5px"}},$e=T({__name:"FlowNodeFormat",props:{nodeUser:{type:Object,dafault:()=>{}},row:{type:Array,dafault:()=>[]},disableSelect:{type:Boolean,default:!1}},setup(c){return Q(),(_,s)=>{const w=ie,l=Z,b=re,N=oe,S=le,D=G("flow-node-format",!0),u=se,m=ae,I=ye,C=_e;return t(),o("div",he,[g(C,{reverse:!1},{default:p(()=>[(t(!0),o(k,null,x(c.row,(e,F)=>(t(),h(I,{key:F,size:"large",type:e.status!=2?e.status==1?"success":e.status==3?"warning":"info":"primary",icon:e.status==2?n(H):e.status==1?n(W):e.status==3?n(X):n(Y)},{default:p(()=>{var z;return[e.selectUser&&(!c.nodeUser[e.id]||((z=c.nodeUser[e.id])==null?void 0:z.length)==0)?(t(),o("p",ve,[f(i(e.name)+" ",1),e.placeholder&&e.placeholder.length>0?(t(),o(k,{key:0},[f("["+i(e.placeholder)+"]",1)],64)):d("",!0)])):(t(),o(k,{key:1},[r("div",ge,[r("div",we,i(e.name),1),r("div",be,i(e.showTimeStr),1)]),e.placeholder&&e.placeholder.length>0?(t(),o("div",ke,"["+i(e.placeholder)+"]",1)):d("",!0)],64)),e.userVoList&&e.userVoList.length>0?(t(),o("div",Se,[(t(!0),o(k,null,x(e.userVoList,(a,v)=>(t(),o("div",{class:"box-card",key:v,style:{"margin-bottom":"10px",border:"0px solid red",width:"60px","text-align":"center"}},[r("div",Ie,[r("div",Te,[r("div",Ne,[r("div",xe,[g(l,{value:12,"is-dot":"",type:a.status==1?"success":a.status==2?"primary":a.status==3?"warning":"info",class:"item"},{default:p(()=>[g(w,{shape:"square",size:30,src:a.avatar},{default:p(()=>[f(i(a.name.substring(0,1)),1)]),_:2},1032,["src"])]),_:2},1032,["type"])]),r("div",Ee,i(a.name),1)])])])]))),128))])):d("",!0),(t(!0),o(k,null,x(e.approveDescList,(a,v)=>(t(),o("div",{key:v,style:{"margin-top":"10px"}},[r("div",Ue,[r("div",De,[g(w,{shape:"square",size:30,src:a.user.avatar},{default:p(()=>[f(i(a.user.name.substring(0,1)),1)]),_:2},1032,["src"])]),r("div",ze,[f(i(a.user.name)+" ",1),g(b,{size:"small",type:"danger"},{default:p(()=>[f(i(a.descTypeStr),1)]),_:2},1024)]),r("div",Le,i(a.showTimeStr),1)]),a.sys?d("",!0):(t(),o("div",Be,[g(N,{size:"small",type:"primary"},{default:p(()=>[f(i(JSON.parse(a.desc).title),1)]),_:2},1024)])),r("div",Ce,[a.sys?(t(),h(b,{key:0,type:"success"},{default:p(()=>[f("系统")]),_:1})):d("",!0),g(N,{type:"info"},{default:p(()=>[f(i(JSON.parse(a.desc).content),1)]),_:2},1024)]),v!=e.approveDescList.length-1?(t(),h(S,{key:1})):d("",!0)]))),128)),e.selectUser?(t(),h(ne,{key:3,disabled:c.disableSelect,orgList:c.nodeUser[e.id],"onUpdate:orgList":a=>c.nodeUser[e.id]=a,type:"user",multiple:e.multiple},null,8,["disabled","orgList","onUpdate:orgList","multiple"])):d("",!0),e.branch.length>0?(t(),h(m,{key:4,type:"border-card"},{default:p(()=>[(t(!0),o(k,null,x(e.branch,(a,v)=>(t(),h(u,{label:"分支"+(v+1),name:v+"",key:v},{default:p(()=>[a.placeholder&&a.placeholder.length>0?(t(),o(k,{key:0},[f("["+i(a.placeholder)+"]",1)],64)):d("",!0),r("div",Fe,[g(D,{"node-user":c.nodeUser,disableSelect:c.disableSelect,row:a.children},null,8,["node-user","disableSelect","row"])])]),_:2},1032,["label","name"]))),128))]),_:2},1024)):d("",!0)]}),_:2},1032,["type","icon"]))),128))]),_:1})])}}});const Ve=ce($e,[["__scopeId","data-v-308a01d9"]]),Ge=T({__name:"FlowNodeFormatData",props:{flowId:{type:String,default:""},disableSelect:{type:Boolean,default:!1},taskId:{type:String,default:""},processInstanceId:{type:String,default:""},formData:{type:Object,dafault:()=>{}},selectUserNodeId:{type:Array,dafault:()=>[]}},setup(c,{expose:_}){const s=c,w=E([]),l=u=>{var m={flowId:s.flowId,processInstanceId:s.processInstanceId,paramMap:u,taskId:s.taskId};de(m).then(I=>{w.value=I.data})};ee(()=>s.formData,u=>{setTimeout(function(){new Date().getTime()-b.value>500&&(b.value=new Date().getTime(),l(u))},600)});const b=E();te(()=>{b.value=new Date().getTime(),l({})});const N=()=>{for(var u of s.selectUserNodeId){var m=S.value[u];if(!(m&&m.length>0))return!1}return!0},S=E({});return _({validate:N,formatSelectNodeUser:()=>{var u={};for(var m of s.selectUserNodeId){var I=S.value[m];u[m+"_assignee_select"]=I}return u}}),(u,m)=>(t(),h(Ve,{row:w.value,"node-user":S.value,disableSelect:c.disableSelect,ref:"flowNodeFormatRef"},null,8,["row","node-user","disableSelect"]))}});export{Ge as _};
