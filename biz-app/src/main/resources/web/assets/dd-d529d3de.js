import{d as h,aj as m,ab as g,o as f,az as y,a as v,c as k,af as x,ag as S,ah as j,k as c}from"./index-d5547550.js";import{_ as w}from"./_plugin-vue_export-helper-c27b6911.js";const r=o=>(S("data-v-5a2ec189"),o=o(),j(),o),B={class:"login-container"},I=r(()=>c("h1",null,"请使用钉钉扫码登录",-1)),b=r(()=>c("div",{id:"self_defined_element",class:"self-defined-classname"},null,-1)),q=[I,b],C=h({__name:"dd",setup(o){const i=m(),_=g();function l(e){window.DTFrameLogin({id:"self_defined_element",width:300,height:300},e,t=>{const{redirectUrl:E,authCode:a,state:L}=t;console.log(a);const s=_.query,p=s.redirect??"/";i.loginByToken(a).then(()=>{const u=Object.keys(s).reduce((d,n)=>(n!=="redirect"&&(d[n]=s[n]),d),{});x.push({path:p,query:u})})},t=>{alert(`Login Error: ${t}`)})}return f(()=>{let e=document.createElement("script");e.type="text/javascript",e.src="https://g.alicdn.com/dingding/h5-dingtalk-login/0.21.0/ddlogin.js",document.body.appendChild(e),y().then(t=>{l(t.data)})}),(e,t)=>(v(),k("div",B,q))}});const U=w(C,[["__scopeId","data-v-5a2ec189"]]);export{U as default};
