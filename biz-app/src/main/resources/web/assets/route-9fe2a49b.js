import{d as O,h as v,r as b,o as V,D as u,L as E,ck as L,a as d,c as l,k as i,au as R,f as s,P as T,cl as z,q as N,am as J,n as M,a5 as U,ag as j,ah as q}from"./index-d5547550.js";import{p as F,b as H}from"./const-a11e1fef.js";import A from"./addNode-8159b811.js";import{$ as h}from"./index-a7c7b111.js";import{u as G}from"./index-71f0fd6b.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";import"./el-popper-00977718.js";import"./el-popover-07a17928.js";import"./dropdown-b09318e3.js";import"./flow-165b4256.js";const y=e=>(j("data-v-bb0b6023"),e=e(),q(),e),Q={class:"node-wrap"},W=["placeholder"],X={class:"text"},Y=y(()=>i("i",{class:"anticon anticon-right arrow"},null,-1)),Z={key:0,class:"error_tip"},ee=y(()=>i("i",{class:"anticon anticon-exclamation-circle"},null,-1)),oe=[ee],te=O({__name:"route",props:{nodeConfig:{type:Object,default:()=>{}}},emits:["updateData"],setup(e,{emit:k}){const n=e;v();let r=b(!1);V(()=>{n.nodeConfig.error=!h.routeOk(n.nodeConfig)});const D=()=>{r.value=!1,n.nodeConfig.nodeName=n.nodeConfig.nodeName||c};let c=u(()=>F[n.nodeConfig.type]);var f=u(()=>h.routeStr(n.nodeConfig));const S=o=>{o||o===0?_.value[o]=!0:r.value=!0};let _=b([]);const g=o=>{k("updateData",o)},x=()=>{g(n.nodeConfig.childNode)};let m=G(),{setRoute:w,setRouteConfig:I}=m,p=v().uid,P=u(()=>m.routeConfigData);E(P,o=>{o.flag&&o.id===p&&g(o.value)});const $=()=>{w(!0),I({value:JSON.parse(JSON.stringify(n.nodeConfig)),flag:!1,id:p})};return(o,t)=>{var C;const B=L("focus");return d(),l("div",Q,[i("div",{class:M(["node-wrap-box",(e.nodeConfig.type==0?"start-node ":"")+(e.nodeConfig.error?"active error":"")])},[i("div",{class:"title",style:R(`background: rgb(${s(H)[e.nodeConfig.type]});`)},[s(r)?T((d(),l("input",{key:0,type:"text",class:"ant-input editable-title-input",onBlur:t[0]||(t[0]=a=>D()),onFocus:t[1]||(t[1]=a=>a.currentTarget.select()),"onUpdate:modelValue":t[2]||(t[2]=a=>e.nodeConfig.nodeName=a),placeholder:s(c)},null,40,W)),[[B],[z,e.nodeConfig.nodeName]]):(d(),l("span",{key:1,class:"editable-title",onClick:t[3]||(t[3]=a=>S())},N(e.nodeConfig.nodeName),1)),i("i",{class:"anticon anticon-close close",onClick:x})],4),i("div",{class:"content",onClick:$},[i("div",X,N(((C=s(f))==null?void 0:C.length)>0?s(f):"请选择"+s(c)),1),Y]),e.nodeConfig.error?(d(),l("div",Z,oe)):J("",!0)],2),U(A,{"current-node":e.nodeConfig,childNodeP:e.nodeConfig.childNode,"onUpdate:childNodeP":t[4]||(t[4]=a=>e.nodeConfig.childNode=a)},null,8,["current-node","childNodeP"])])}}});const ge=K(te,[["__scopeId","data-v-bb0b6023"]]);export{ge as default};
