import{d as w,r,L as U,a as V,c as I,a5 as s,w as c,f as m,as as _,k as E,R as B,a7 as v}from"./index-d5547550.js";/* empty css                  */import{E as z}from"./el-progress-562499f2.js";import{_ as M}from"./plus-bafa12a0.js";import{u as N}from"./index-15f47425.js";import{E as k}from"./index-a6355ec2.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";const P=["src"],R=w({__name:"MultiUpload",props:{disabled:{type:Boolean,default:!1},modelValue:{type:Array,default:[]},limit:{type:Number,default:10},maxSize:{type:Number,default:10}},emits:["update:modelValue"],setup(d,{emit:p}){const n=d,f=r(""),u=r(!1),o=r([]);U(()=>n.modelValue,e=>{const a=o.value.map(l=>l.url);a.length>0&&a.length===e.length&&a.every(l=>e.some(t=>t===l))&&e.every(l=>a.some(t=>t===l))||(o.value=e.map(l=>({url:l.url,name:l.name})))},{immediate:!0});async function g(e){const{data:a}=await N(e.file),l=o.value.findIndex(t=>t.uid==e.file.uid);o.value.splice(l,1,{name:e.file.name,url:a}),p("update:modelValue",o.value.map(t=>({url:t.url,name:t.name})))}function y(e){e.url&&p("update:modelValue",o.value.map(l=>({url:l.url,name:l.name})))}function x(e){return console.log(e),e.type.indexOf("image")<0?(v.warning("请上传图片"),!1):e.size>n.maxSize*1048*1048?(v.warning("上传图片不能大于"+n.maxSize+"M"),!1):!0}const b=e=>{f.value=e.url,u.value=!0};return(e,a)=>{const l=M,t=z,h=k;return V(),I(B,null,[s(t,{"file-list":m(o),"onUpdate:fileList":a[0]||(a[0]=i=>_(o)?o.value=i:null),"list-type":"picture-card",class:"single-uploader","before-upload":x,"http-request":g,"on-remove":y,"on-preview":b,limit:n.limit,disabled:d.disabled},{default:c(()=>[s(l)]),_:1},8,["file-list","limit","disabled"]),s(h,{modelValue:m(u),"onUpdate:modelValue":a[1]||(a[1]=i=>_(u)?u.value=i:null)},{default:c(()=>[E("img",{"w-full":"",src:m(f),alt:"Preview Image"},null,8,P)]),_:1},8,["modelValue"])],64)}}});const j=L(R,[["__scopeId","data-v-31ca1b00"]]);export{j as _};
