import{u as T}from"./flow-2349aa77.js";import{D as c}from"./index-e01dade3.js";function o(){}let v=T();const L=c(()=>v.step2),I=c(()=>{var e={};for(var t of L.value)e[t.id]=t;return e.root={name:"发起人",type:"SelectUser"},e});o.prototype={timer:"",debounce(e,t=500){var s=this;return function(r){let p=this,a=r;clearTimeout(s.timer),s.timer=setTimeout(function(){e.call(p,a)},t)}},setCookie(e){for(var t=0,s=e.length;t<s;t++)for(var r in e[t])document.cookie=r+"="+encodeURIComponent(e[t][r])+"; path=/"},getCookie(e){for(var t=document.cookie,s=t.split("; "),r=0,p=s.length;r<p;r++){var a=s[r].split("=");if(e==a[0])return decodeURIComponent(a[1])}},clearCookie(e){var t=new Date;t.setTime(-1e3);for(var s=0,r=e.length;s<r;s++)document.cookie=""+e[s]+"=''; path=/; expires="+t.toGMTString()},arrToStr(e){if(e)return e.map(t=>t.name).toString()},toggleClass(e,t,s="id"){return e.some(r=>r[s]==t[s])},toChecked(e,t,s="id"){var r=this.toggleClass(e,t,s);r?this.removeEle(e,t,s):e.push(t)},removeEle(e,t,s="id"){var r;e.map((p,a)=>{p[s]==t[s]&&(r=a)}),e.splice(r,1)},checkApproval(e){var t;if(e.assignedType==1){if(e.nodeUserList.length==0)return!1}else if(e.assignedType==3){if(e.nodeUserList.length==0)return!1}else{if(e.assignedType==8&&e.formUserId.length==0)return!1;if(e.assignedType==9&&e.formUserId.length==0)return!1}return!(e.nobody.handler==="TO_USER"&&e.nobody.assignedUser.length==0||e.refuse.handler==="TO_NODE"&&((t=e.refuse.nodeId)==null?void 0:t.length)==0)},setApproverStr(e){return e.assignedType==1?e.nodeUserList.length>=1?e.nodeUserList.map(t=>t.name).join(","):"":e.assignedType==3?e.nodeUserList.length>=1?e.nodeUserList.map(t=>t.name).join(","):"":e.assignedType==2?e.deptLeaderLevel==1?"直接部门主管":"第"+e.deptLeaderLevel+"级部门主管":e.assignedType==4?"发起人自选":e.assignedType==5?"发起人自己":e.assignedType==7?"到第"+e.deptLeaderLevel+"级部门主管终止":e.assignedType==8&&e.formUserId.length>0?"表单人员："+e.formUserName:e.assignedType==9&&e.formUserId.length>0?"表单部门："+e.formUserName:""},dealStr(e,t){let s=[],r=e.split(",");for(var p in t)r.map(a=>{a==p&&s.push(t[p].value)});return s.join("或")},conditionStr(e,t){var{conditionList:s,groupMode:r}=e.conditionNodes[t];if(s.length==0)return t==e.conditionNodes.length-1?"其他条件进入此流程":"请设置条件";var p=[];for(var a of s){let y=a.mode;var i=[];for(var U of a.conditionList){const{key:f,expression:n,value:d}=U;if(!f)continue;let h=I.value[f];var u=h.name,l=d;h.type==="SelectUser"||h.type==="SelectDept"||h.type==="SelectMultiUser"||h.type==="SelectMultiDept"?l=d.map(m=>m.name).join(","):h.type==="SingleSelect"?l=d.map(m=>m.value).join(","):l||(l="?"),n==="=="?i.push(u+" 等于 "+l):n==="in"?i.push(u+" 属于 "+l):n==="notin"?i.push(u+" 不属于 "+l):n==="!="?i.push(u+" 不等于 "+l):n===">"?i.push(u+" 大于 "+l):n===">="?i.push(u+" 大于等于 "+l):n==="<"?i.push(u+" 小于 "+l):n==="<="?i.push(u+" 小于等于 "+l):n==="contain"?i.push(u+" 包含 "+l):n==="notcontain"&&i.push(u+" 不包含 "+l)}if(y){let f=i.join(" 且 ");i.length>0&&p.push("("+f+")")}else{let f=i.join(" 或 ");i.length>0&&p.push("("+f+")")}}return p.length>0?p.join(r?" 且 ":" 或 "):t==e.conditionNodes.length-1?"默认条件":"请设置条件"},copyerStr(e){var t;if(((t=e.nodeUserList)==null?void 0:t.length)!=0)return this.arrToStr(e.nodeUserList)}};const k=new o;export{k as $};
