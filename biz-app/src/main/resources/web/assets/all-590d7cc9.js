import{aO as fe,aP as _e,aQ as Se,aR as ge,b as ee,d as J,u as te,D as C,a as n,c as w,k as o,e as B,f as t,l as O,n as c,m as re,am as I,q as V,_ as se,s as le,aS as ne,aT as pe,h as oe,L as Z,p as he,i as ye,r as h,j as ke,o as ce,M as we,K as be,au as ie,w as _,E as A,a5 as m,aU as $e,aV as Ce,a3 as P,v as Ie,aj as Ee,ab as Ne,a8 as Te,P as M,Q,R as Re,a6 as De,aW as Be,aD as Oe,ag as xe,ah as Pe}from"./index-d5547550.js";import{v as Ve}from"./el-loading-7d43f325.js";/* empty css                  *//* empty css                */import{E as Je}from"./el-text-a7cd3acd.js";import{g as Fe,a as Le}from"./index-3b3587d2.js";import je from"./step1-0c369578.js";import ze from"./step2-d80daf6e.js";import Me from"./step3-71fb6816.js";import Ue from"./step4-f039b7b6.js";import{u as We}from"./flow-165b4256.js";import{u as qe}from"./el-tab-pane-a6cb13f9.js";import{E as Ge}from"./index-a6355ec2.js";import{_ as Ke}from"./_plugin-vue_export-helper-c27b6911.js";import"./el-card-39a9c0d0.js";/* empty css                */import"./el-tag-de6752b8.js";import"./el-select-46753b34.js";import"./el-popper-00977718.js";import"./el-scrollbar-cbe0c54f.js";import"./strings-fbdcd853.js";import"./isEqual-fe47b28a.js";import"./_Uint8Array-c7447712.js";import"./debounce-e2bc871f.js";import"./index-e8e7f773.js";import"./el-form-item-2de9c3c8.js";import"./_baseClone-e7eb389f.js";import"./index-6d308f65.js";import"./SingleUpload-ae616f10.js";import"./el-progress-562499f2.js";import"./cloneDeep-cfc40afc.js";import"./plus-bafa12a0.js";import"./index-15f47425.js";import"./selectAndShow.vue_vue_type_script_setup_true_lang-9eafc7ba.js";import"./employeesDialog-54936475.js";import"./selectBox-26a3a753.js";/* empty css                  *//* empty css                    */import"./selectBox.vue_vue_type_style_index_0_scoped_82c14c6c_lang-f1c14f73.js";import"./index-a7c7b111.js";import"./const-a11e1fef.js";import"./index-222e6800.js";import"./flatten-36990bb8.js";import"./_baseFlatten-c80c9ba3.js";import"./_overRest-d3d6b67b.js";import"./index-85bc974f.js";import"./selectResult-4abbf083.js";/* empty css                                                                     *//* empty css                                                                        */import"./orgItem-a67c9471.js";import"./getFormWidget-6a62e076.js";import"./Area-836e6083.js";import"./area-23a735cb.js";import"./el-radio-92787871.js";import"./arrays-e667dc24.js";import"./Date-3e356dbd.js";import"./el-date-picker-2b967550.js";import"./panel-time-pick-ae955f65.js";import"./index-da53d962.js";import"./DateTime-de06f21f.js";import"./Description-41c11d92.js";import"./Empty-e21e601f.js";import"./Input-45ba5ba8.js";import"./Money-ca211554.js";import"./el-input-number-f4eeab94.js";import"./MultiSelect-355b84fc.js";import"./Number-040385fc.js";import"./Score-a0ed8d55.js";import"./el-rate-1b1664df.js";import"./SelectDept-15a8e478.js";import"./SelectMultiDept-7fbc4ddc.js";import"./SelectMultiUser-a6f17dc4.js";import"./SelectUser-e4906c1f.js";import"./SingleSelect-915a5a36.js";import"./Textarea-466c5ec6.js";import"./Time-1bed9846.js";import"./el-time-picker-f79f3178.js";import"./isArrayLikeObject-724a27ce.js";import"./UploadFile-b7fa1437.js";import"./UploadImage-478fe7ac.js";import"./MultiUpload-acf0a282.js";import"./Area-4b9e77db.js";import"./Date-32b0142e.js";import"./DateTime-32e9f3d3.js";import"./Description-f556bd90.js";import"./Input-be908f41.js";import"./Layout-804820d8.js";import"./Money-6fd9e098.js";import"./MultiSelect-77539ed7.js";import"./el-link-b4b52dfc.js";import"./Number-0c6ab0a1.js";import"./Score-4c567d65.js";import"./el-switch-a81630c6.js";import"./SelectDept-7c006d8b.js";import"./SelectMultiDept-38c1199e.js";import"./SelectMultiUser-6f732754.js";import"./SelectUser-87c65762.js";import"./SingleSelect-a5392d64.js";import"./Textarea-dff0b44b.js";import"./Time-40097dd2.js";import"./UploadFile-1765090a.js";import"./UploadImage-f86de743.js";import"./nodeWrap-114ba04b.js";import"./approval-90ad6b64.js";import"./addNode-8159b811.js";import"./el-popover-07a17928.js";import"./dropdown-b09318e3.js";import"./index-71f0fd6b.js";import"./starter-900d10fb.js";import"./cc-226f3597.js";import"./trigger-938c90c5.js";import"./delay-9c1087fe.js";import"./subProcess-996df794.js";import"./route-9fe2a49b.js";import"./promoterDrawer-131b3a63.js";import"./el-drawer-75c80c60.js";import"./use-dialog-27a1e524.js";import"./formPerm-3f783d49.js";/* empty css                       */import"./approverDrawer-e1d42ef1.js";import"./el-row-a594fbeb.js";import"./copyerDrawer-66e210f4.js";import"./triggerDrawer.vue_vue_type_script_setup_true_lang-74f950f1.js";import"./el-alert-867b40be.js";import"./delayDrawer.vue_vue_type_script_setup_true_lang-c0dfbbb8.js";import"./subProcessDrawer.vue_vue_type_script_setup_true_lang-92a701b1.js";import"./conditionDrawer-e44d7c1c.js";import"./conditionGroup-01fc4cb1.js";import"./condition-7334fe6b.js";import"./index-6e9421a4.js";import"./routeDrawer-1c92fdab.js";import"./refs-5fd04da2.js";const F={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},ae={[F.success]:fe,[F.warning]:_e,[F.error]:Se,[F.info]:ge},Qe=ee({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,values:["success","warning","info","error"],default:"info"}}),Ae=J({name:"ElResult"}),He=J({...Ae,props:Qe,setup(b){const $=b,e=te("result"),v=C(()=>{const i=$.icon,d=i&&F[i]?F[i]:"icon-info",a=ae[d]||ae["icon-info"];return{class:d,component:a}});return(i,d)=>(n(),w("div",{class:c(t(e).b())},[o("div",{class:c(t(e).e("icon"))},[B(i.$slots,"icon",{},()=>[t(v).component?(n(),O(re(t(v).component),{key:0,class:c(t(v).class)},null,8,["class"])):I("v-if",!0)])],2),i.title||i.$slots.title?(n(),w("div",{key:0,class:c(t(e).e("title"))},[B(i.$slots,"title",{},()=>[o("p",null,V(i.title),1)])],2)):I("v-if",!0),i.subTitle||i.$slots["sub-title"]?(n(),w("div",{key:1,class:c(t(e).e("subtitle"))},[B(i.$slots,"sub-title",{},()=>[o("p",null,V(i.subTitle),1)])],2)):I("v-if",!0),i.$slots.extra?(n(),w("div",{key:2,class:c(t(e).e("extra"))},[B(i.$slots,"extra")],2)):I("v-if",!0)],2))}});var Xe=se(He,[["__file","/home/runner/work/element-plus/element-plus/packages/components/result/src/result.vue"]]);const Ye=le(Xe),Ze=ee({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),et={[ne]:(b,$)=>[b,$].every(pe)},tt=J({name:"ElSteps"}),st=J({...tt,props:Ze,emits:et,setup(b,{emit:$}){const e=b,v=te("steps"),{children:i,addChild:d,removeChild:a}=qe(oe(),"ElStep");return Z(i,()=>{i.value.forEach((p,y)=>{p.setIndex(y)})}),he("ElSteps",{props:e,steps:i,addStep:d,removeStep:a}),Z(()=>e.active,(p,y)=>{$(ne,p,y)}),(p,y)=>(n(),w("div",{class:c([t(v).b(),t(v).m(p.simple?"simple":p.direction)])},[B(p.$slots,"default")],2))}});var ot=se(st,[["__file","/home/runner/work/element-plus/element-plus/packages/components/steps/src/steps.vue"]]);const it=ee({title:{type:String,default:""},icon:{type:ye},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),at=J({name:"ElStep"}),rt=J({...at,props:it,setup(b){const $=b,e=te("step"),v=h(-1),i=h({}),d=h(""),a=ke("ElSteps"),p=oe();ce(()=>{Z([()=>a.props.active,()=>a.props.processStatus,()=>a.props.finishStatus],([s])=>{Y(s)},{immediate:!0})}),we(()=>{a.removeStep(K.uid)});const y=C(()=>$.status||d.value),u=C(()=>{const s=a.steps.value[v.value-1];return s?s.currentStatus:"wait"}),k=C(()=>a.props.alignCenter),E=C(()=>a.props.direction==="vertical"),S=C(()=>a.props.simple),L=C(()=>a.steps.value.length),W=C(()=>{var s;return((s=a.steps.value[L.value-1])==null?void 0:s.uid)===(p==null?void 0:p.uid)}),N=C(()=>S.value?"":a.props.space),H=C(()=>[e.b(),e.is(S.value?"simple":a.props.direction),e.is("flex",W.value&&!N.value&&!k.value),e.is("center",k.value&&!E.value&&!S.value)]),q=C(()=>{const s={flexBasis:pe(N.value)?`${N.value}px`:N.value?N.value:`${100/(L.value-(k.value?0:1))}%`};return E.value||W.value&&(s.maxWidth=`${100/L.value}%`),s}),G=s=>{v.value=s},X=s=>{const T=s==="wait",j={transitionDelay:`${T?"-":""}${150*v.value}ms`},l=s===a.props.processStatus||T?0:100;j.borderWidth=l&&!S.value?"1px":0,j[a.props.direction==="vertical"?"height":"width"]=`${l}%`,i.value=j},Y=s=>{s>v.value?d.value=a.props.finishStatus:s===v.value&&u.value!=="error"?d.value=a.props.processStatus:d.value="wait";const T=a.steps.value[v.value-1];T&&T.calcProgress(d.value)},K=be({uid:p.uid,currentStatus:y,setIndex:G,calcProgress:X});return a.addStep(K),(s,T)=>(n(),w("div",{style:ie(t(q)),class:c(t(H))},[I(" icon & line "),o("div",{class:c([t(e).e("head"),t(e).is(t(y))])},[t(S)?I("v-if",!0):(n(),w("div",{key:0,class:c(t(e).e("line"))},[o("i",{class:c(t(e).e("line-inner")),style:ie(i.value)},null,6)],2)),o("div",{class:c([t(e).e("icon"),t(e).is(s.icon||s.$slots.icon?"icon":"text")])},[B(s.$slots,"icon",{},()=>[s.icon?(n(),O(t(A),{key:0,class:c(t(e).e("icon-inner"))},{default:_(()=>[(n(),O(re(s.icon)))]),_:1},8,["class"])):t(y)==="success"?(n(),O(t(A),{key:1,class:c([t(e).e("icon-inner"),t(e).is("status")])},{default:_(()=>[m(t($e))]),_:1},8,["class"])):t(y)==="error"?(n(),O(t(A),{key:2,class:c([t(e).e("icon-inner"),t(e).is("status")])},{default:_(()=>[m(t(Ce))]),_:1},8,["class"])):t(S)?I("v-if",!0):(n(),w("div",{key:3,class:c(t(e).e("icon-inner"))},V(v.value+1),3))])],2)],2),I(" title & description "),o("div",{class:c(t(e).e("main"))},[o("div",{class:c([t(e).e("title"),t(e).is(t(y))])},[B(s.$slots,"title",{},()=>[P(V(s.title),1)])],2),t(S)?(n(),w("div",{key:0,class:c(t(e).e("arrow"))},null,2)):(n(),w("div",{key:1,class:c([t(e).e("description"),t(e).is(t(y))])},[B(s.$slots,"description",{},()=>[P(V(s.description),1)])],2))],2)],6))}});var ue=se(rt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/steps/src/item.vue"]]);const lt=le(ot,{Step:ue}),nt=Ie(ue);const U=b=>(xe("data-v-bae8fc9f"),b=b(),Pe(),b),pt={class:"titlebar"},ct={class:"f1"},ut={class:"f2"},mt=["activeStep"],vt=["activeStep"],dt=U(()=>o("span",null,"基础信息",-1)),ft=["activeStep"],_t=["activeStep"],St=U(()=>o("span",null,"表单设计",-1)),gt=["activeStep"],ht=["activeStep"],yt=U(()=>o("span",null,"流程设计",-1)),kt=["activeStep"],wt=["activeStep"],bt=U(()=>o("span",null,"扩展设置",-1)),$t={class:"f3"},Ct=U(()=>o("div",{style:{height:"5px","background-color":"white","margin-bottom":"0px"}},null,-1)),It={style:{"text-align":"center"}},Et={style:{display:"inline-block",border:"0px solid red",width:"100px",height:"100px"}},Nt=J({__name:"all",setup(b){const{proxy:$}=oe();let e=We();const v=h(),i=h(),d=h(),a=h(),p=h([]),y=C(()=>{let l=e.step1.name;return $.$isBlank(l)?"未命名表单":l}),u=h(0),k=h(0),E=h(!1),S=h(!1),L=()=>{u.value=k.value,E.value=!1},W=l=>{p.value=[],k.value=0,E.value=!0,S.value=!0,setTimeout(function(){X()},500)},N=Ee(),H=Ne();ce(()=>{const l=H.query,r=l.groupId??"",R=l.flowId??"",D=l.cp??"";if($.$isNotBlank(r)&&(G.value=r),$.$isNotBlank(R))Fe(R).then(g=>{var{data:f}=g;e.step1.admin=JSON.parse(f.admin),e.step1.rangeList=f.rangeList,e.step1.name=f.name,e.step1.logo=f.logo,(!D||parseInt(D)!==1)&&(e.step1.flowId=R),e.step1.remark=f.remark,e.step1.groupId=f.groupId,e.setStep2(JSON.parse(f.formItems)),f.settings&&e.setStep4(JSON.parse(f.settings)),q.value=JSON.parse(f.process)});else{let g=N.userId,f=N.nickname,z=N.avatar;e.step1.admin=[{id:g,name:f,avatar:z,type:"user"}]}});const q=h();var G=h("");const X=()=>{v.value.validate(function(l,r){l?(k.value=1,console.log("step-1",new Date().getTime()),setTimeout(function(){Y()},500)):(S.value=!1,p.value=r)})},Y=()=>{i.value.validate(function(l,r){l?(console.log("step-2",new Date().getTime()),setTimeout(function(){k.value=2,K()},500)):(S.value=!1,p.value=r)})},K=()=>{setTimeout(function(){d.value.validate(function(l,r){l?(console.log("step-3",new Date().getTime()),setTimeout(function(){k.value=3,s()},500)):(S.value=!1,p.value=r)})})},s=()=>{setTimeout(function(){a.value.validate(function(l,r){l?(console.log("step-4",new Date().getTime()),k.value=4):(S.value=!1,p.value=r)})})},T=Te(),j=()=>{d.value.getProcessData().then(l=>{let r=e.step1,R=e.step2,D=e.step4,g=$.$deepCopy(r);g.formItems=JSON.stringify(R),g.process=JSON.stringify(l),g.admin=JSON.stringify(r.admin),g.settings=JSON.stringify(D),Le(g).then(f=>{E.value=!1,e.$reset(),T.push("/flow/group")})})};return(l,r)=>{const R=Je,D=Oe,g=nt,f=lt,z=Ye,me=A,ve=Ge,de=Ve;return n(),w("div",null,[o("div",pt,[o("div",ct,[m(R,{tag:"b",size:"large",type:"primary"},{default:_(()=>[P(V(y.value),1)]),_:1})]),o("div",ut,[o("span",{class:"center_t",effect:"dark",activeStep:u.value==0,onClick:r[0]||(r[0]=x=>u.value=0)},[o("span",{activeStep:u.value==0},"1",8,vt),dt],8,mt),o("span",{class:"center_t",effect:"dark",activeStep:u.value==1,onClick:r[1]||(r[1]=x=>u.value=1)},[o("span",{activeStep:u.value==1},"2",8,_t),St],8,ft),o("span",{class:"center_t",effect:"dark",activeStep:u.value==2,onClick:r[2]||(r[2]=x=>u.value=2)},[o("span",{activeStep:u.value==2},"3",8,ht),yt],8,gt),o("span",{class:"center_t",effect:"dark",activeStep:u.value==3,onClick:r[3]||(r[3]=x=>u.value=3)},[o("span",{activeStep:u.value==3},"4",8,wt),bt],8,kt)]),o("div",$t,[m(D,{type:"primary",onClick:W},{default:_(()=>[P("发 布")]),_:1})])]),Ct,M(m(je,{groupId:t(G),ref_key:"step1Ref",ref:v},null,8,["groupId"]),[[Q,u.value===0]]),M(m(ze,{ref_key:"step2Ref",ref:i},null,512),[[Q,u.value===1]]),M(m(Me,{nodeConfigObj:q.value,ref_key:"step3Ref",ref:d},null,8,["nodeConfigObj"]),[[Q,u.value===2]]),M(m(Ue,{ref_key:"step4Ref",ref:a},null,512),[[Q,u.value===3]]),m(ve,{modelValue:E.value,"onUpdate:modelValue":r[4]||(r[4]=x=>E.value=x),title:"流程检查"},{default:_(()=>[m(f,{active:k.value,"finish-status":"success",simple:"",style:{"margin-top":"20px"}},{default:_(()=>[m(g,{title:"基础信息"}),m(g,{title:"表单设计"}),m(g,{title:"流程设计"}),m(g,{title:"扩展设置"})]),_:1},8,["active"]),o("div",It,[k.value==4?(n(),O(z,{key:0,icon:"success",title:"检查成功","sub-title":"流程检查完成，现在提交？"},{extra:_(()=>[m(D,{type:"primary",onClick:j},{default:_(()=>[P("提交")]),_:1})]),_:1})):I("",!0),p.value.length==0&&E.value&&S.value&&k.value<3?(n(),O(z,{key:1,title:"检查中","sub-title":"正在检查流程信息"},{icon:_(()=>[M(o("span",Et,null,512),[[de,!0]])]),_:1})):I("",!0),p.value.length>0?(n(),O(z,{key:2,icon:"error",title:"检查失败"},{"sub-title":_(()=>[(n(!0),w(Re,null,De(p.value,x=>(n(),w("div",null,[m(R,{type:"danger"},{default:_(()=>[m(me,null,{default:_(()=>[m(t(Be))]),_:1}),P(" "+V(x),1)]),_:2},1024)]))),256))]),extra:_(()=>[m(D,{type:"primary",onClick:L},{default:_(()=>[P("去修改")]),_:1})]),_:1})):I("",!0)])]),_:1},8,["modelValue"])])}}});const ei=Ke(Nt,[["__scopeId","data-v-bae8fc9f"]]);export{ei as default};
