import{aO as y,d as A,r as p,aj as I,a_ as F,L as v,o as J,a as l,c,a5 as o,w as e,a3 as r,k,f as m,as as L,R as h,a6 as E,q as w,aA as j,aB as q}from"./index-e01dade3.js";import{a as P,E as W}from"./el-row-e9611a44.js";import{E as z}from"./el-card-16bdf0d8.js";/* empty css                */import{a as D,E as G}from"./el-form-item-85be6a3a.js";import{E as H}from"./el-link-b55a22bf.js";import"./_baseClone-59dac119.js";import"./_Uint8Array-aeb50f83.js";function K(i){return y({url:"/websocket/sendToAll",method:"post",params:{message:i}})}function Q(i,n){return y({url:"/websocket/sendToUser/"+i,method:"post",params:{message:n}})}const X={class:"app-container"},Y={class:"search"},re=A({__name:"websocket",setup(i){const n=p("初始内容"),S=p(["接收到一条主题消息"]),C=p(["接收到一条点对线消息"]),N=I().userId,{data:R,status:T,close:Z,send:V,open:$}=F("ws://localhost:8989/ws",{onConnected(t){console.log("订阅主题"),t.send(JSON.stringify({type:"subscribe",topic:"/topic/all"}))},onMessage(t,s){const u=s.data;console.log("Received message:",u)}});v(T,t=>{t==="OPEN"&&(console.log(" 连接已打开，订阅主题"),V(JSON.stringify({type:"subscribe",channel:"/topic/all"})))}),v(R,t=>{console.log("Received data:",t);const s=JSON.parse(t);s.topic==="topic1"?console.log("Received message from topic1:",s):s.topic==="topic2"&&console.log("Received message from topic2:",s)});function M(){K(n.value)}function x(){Q(N,n.value)}return J(()=>{}),(t,s)=>{const u=H,B=j,_=D,f=q,O=G,g=z,b=P,U=W;return l(),c("div",X,[o(u,{href:"https://gitee.com/youlaiorg/vue3-element-admin/blob/master/src/views/demo/websocket.vue",type:"primary",target:"_blank",class:"mb-[20px]"},{default:e(()=>[r("示例源码 请点击>>>>")]),_:1}),k("div",null,[k("div",Y,[o(O,{inline:!0},{default:e(()=>[o(_,null,{default:e(()=>[o(B,{modelValue:m(n),"onUpdate:modelValue":s[0]||(s[0]=a=>L(n)?n.value=a:null)},null,8,["modelValue"])]),_:1}),o(_,null,{default:e(()=>[o(f,{onClick:x},{default:e(()=>[r("发送点对点消息")]),_:1}),o(f,{onClick:M},{default:e(()=>[r("发送广播消息")]),_:1})]),_:1})]),_:1})]),o(U,{gutter:20},{default:e(()=>[o(b,{span:12},{default:e(()=>[o(g,null,{header:e(()=>[r("点对点消息接收 ")]),default:e(()=>[(l(!0),c(h,null,E(m(C),(a,d)=>(l(),c("div",{key:d},w(a),1))),128))]),_:1})]),_:1}),o(b,{span:12},{default:e(()=>[o(g,null,{header:e(()=>[r(" 广播消息接收 ")]),default:e(()=>[(l(!0),c(h,null,E(m(S),(a,d)=>(l(),c("div",{key:d},w(a),1))),128))]),_:1})]),_:1})]),_:1})])])}}});export{re as default};
