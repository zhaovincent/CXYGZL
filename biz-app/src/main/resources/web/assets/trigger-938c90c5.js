import{d as B,h as v,r as N,o as V,D as g,L as E,ck as L,a as r,c as d,k as a,au as O,f as s,P as z,cl as J,q as h,am as M,n as U,a5 as j,ag as q,ah as F}from"./index-d5547550.js";import{p as H,b as A}from"./const-a11e1fef.js";import G from"./addNode-8159b811.js";import{$ as y}from"./index-a7c7b111.js";import{u as K}from"./index-71f0fd6b.js";import{_ as Q}from"./_plugin-vue_export-helper-c27b6911.js";import"./el-popper-00977718.js";import"./el-popover-07a17928.js";import"./dropdown-b09318e3.js";import"./flow-165b4256.js";const k=e=>(q("data-v-985bcee9"),e=e(),F(),e),R={class:"node-wrap"},W=["placeholder"],X={class:"text"},Y=k(()=>a("i",{class:"anticon anticon-right arrow"},null,-1)),Z={key:0,class:"error_tip"},ee=k(()=>a("i",{class:"anticon anticon-exclamation-circle"},null,-1)),te=[ee],oe=B({__name:"trigger",props:{nodeConfig:{type:Object,default:()=>{}}},emits:["updateData"],setup(e,{emit:b}){const n=e;v();let l=N(!1);V(()=>{n.nodeConfig.error=!y.checkTrigger(n.nodeConfig)});const D=t=>{l.value=!1,n.nodeConfig.nodeName=n.nodeConfig.nodeName||c};let c=g(()=>H[n.nodeConfig.type]);var u=g(()=>y.triggerStr(n.nodeConfig));const x=t=>{t||t===0?S.value[t]=!0:l.value=!0};let S=N([]);const f=t=>{b("updateData",t)},_=()=>{f(n.nodeConfig.childNode)};let m=K(),{setTrigger:w,setTriggerConfig:I}=m,p=v().uid,T=g(()=>m.triggerConfigData);E(T,t=>{t.flag&&t.id===p&&f(t.value)});const P=()=>{w(!0),I({value:JSON.parse(JSON.stringify(n.nodeConfig)),flag:!1,id:p})};return(t,o)=>{var C;const $=L("focus");return r(),d("div",R,[a("div",{class:U(["node-wrap-box",(e.nodeConfig.type==0?"start-node ":"")+(e.nodeConfig.error?"active error":"")])},[a("div",{class:"title",style:O(`background: rgb(${s(A)[e.nodeConfig.type]});`)},[s(l)?z((r(),d("input",{key:0,type:"text",class:"ant-input editable-title-input",onBlur:o[0]||(o[0]=i=>D()),onFocus:o[1]||(o[1]=i=>i.currentTarget.select()),"onUpdate:modelValue":o[2]||(o[2]=i=>e.nodeConfig.nodeName=i),placeholder:s(c)},null,40,W)),[[$],[J,e.nodeConfig.nodeName]]):(r(),d("span",{key:1,class:"editable-title",onClick:o[3]||(o[3]=i=>x())},h(e.nodeConfig.nodeName),1)),a("i",{class:"anticon anticon-close close",onClick:_})],4),a("div",{class:"content",onClick:P},[a("div",X,h(((C=s(u))==null?void 0:C.length)>0?s(u):"请选择"+s(c)),1),Y]),e.nodeConfig.error?(r(),d("div",Z,te)):M("",!0)],2),j(G,{"current-node":e.nodeConfig,childNodeP:e.nodeConfig.childNode,"onUpdate:childNodeP":o[4]||(o[4]=i=>e.nodeConfig.childNode=i)},null,8,["current-node","childNodeP"])])}}});const fe=Q(oe,[["__scopeId","data-v-985bcee9"]]);export{fe as default};
