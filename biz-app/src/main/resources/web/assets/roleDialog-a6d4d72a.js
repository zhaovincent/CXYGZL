import{r as B,D as i,L as I,a as L,l as w,w as p,a5 as n,a3 as _,k as d,P as N,as as f,f as a,cl as C,aD as E}from"./index-d5547550.js";/* empty css                  */import R from"./selectBox-26a3a753.js";import A from"./selectResult-4abbf083.js";import{$ as g}from"./index-a7c7b111.js";import{r as T,b as U,s as m,g as M}from"./selectBox.vue_vue_type_style_index_0_scoped_82c14c6c_lang-f1c14f73.js";import{E as P}from"./index-a6355ec2.js";/* empty css                  *//* empty css                    *//* empty css                */import"./_plugin-vue_export-helper-c27b6911.js";import"./index-222e6800.js";import"./isEqual-fe47b28a.js";import"./_Uint8Array-c7447712.js";import"./flatten-36990bb8.js";import"./_baseFlatten-c80c9ba3.js";import"./_overRest-d3d6b67b.js";import"./index-85bc974f.js";import"./flow-165b4256.js";import"./const-a11e1fef.js";/* empty css                                                                     */import"./use-dialog-27a1e524.js";import"./refs-5fd04da2.js";const $={class:"person_body clear"},j={class:"person_tree l"},ne={__name:"roleDialog",props:{visible:{type:Boolean,default:!1},data:{type:Array,default:()=>[]}},emits:["update:visible","change"],setup(y,{emit:c}){const u=y;let l=B([]),D=i(()=>[{type:"role",not:!0,data:T.value,isActive:e=>g.toggleClass(l.value,e,"roleId"),change:e=>{l.value=[e]}}]),b=i(()=>[{type:"role",data:l.value,cancel:e=>g.removeEle(l.value,e,"roleId")}]),s=i({get(){return u.visible},set(e){v()}});I(()=>u.visible,e=>{e&&(U(),m.value="",l.value=u.data.map(({name:t,targetId:r})=>({roleName:t,roleId:r})))});let h=i(()=>l.value.length);const x=()=>{let e=l.value.map(t=>({type:2,targetId:t.roleId,name:t.roleName}));c("change",e)},V=()=>{l.value=[]},v=()=>{c("update:visible",!1)};return(e,t)=>{const r=E,k=P;return L(),w(k,{title:"选择角色",modelValue:a(s),"onUpdate:modelValue":t[2]||(t[2]=o=>f(s)?s.value=o:s=o),width:600,"append-to-body":"",class:"promoter_person"},{footer:p(()=>[n(r,{onClick:v},{default:p(()=>[_("取 消")]),_:1}),n(r,{type:"primary",onClick:x},{default:p(()=>[_("确 定")]),_:1})]),default:p(()=>[d("div",$,[d("div",j,[N(d("input",{type:"text",placeholder:"搜索角色","onUpdate:modelValue":t[0]||(t[0]=o=>f(m)?m.value=o:null),onInput:t[1]||(t[1]=o=>a(M)(o,2))},null,544),[[C,a(m)]]),n(R,{list:a(D)},null,8,["list"])]),n(A,{total:a(h),onDel:V,list:a(b)},null,8,["total","list"])])]),_:1},8,["modelValue"])}}};export{ne as default};
